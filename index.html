<!doctype html>



  


<html class="theme-next mist use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
    
  
  <link href="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|consolas:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






  

<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Sandeepin" />





  <link rel="alternate" href="/atom.xml" title="异想博客" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="异想博客">
<meta property="og:type" content="website">
<meta property="og:title" content="异想博客">
<meta property="og:url" content="http://blog.jfz.me/index.html">
<meta property="og:site_name" content="异想博客">
<meta property="og:description" content="异想博客">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="异想博客">
<meta name="twitter:description" content="异想博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"right","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 'undefined',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://blog.jfz.me/"/>





<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<style>
    .pace .pace-progress {
        background: #1E92FB; /*进度条颜色*/
        height: 3px;
    }
    .pace .pace-progress-inner {
         box-shadow: 0 0 10px #1E92FB, 0 0 5px     #1E92FB; /*阴影颜色*/
    }
    .pace .pace-activity {
        border-top-color: #1E92FB;    /*上边框颜色*/
        border-left-color: #1E92FB;    /*左边框颜色*/
    }
</style>


  <title> 异想博客 </title>
</head>

  	 <!-- custom analytics part create by xiamo -->
<script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
<script>AV.initialize("kJ2sJuSJeByLioULSXrJ5CSq-9Nh9j0Va", "uBWeNxCbFEWsOVDTmAInrDq3");</script>
<script>
function showTime(Counter) {
	var query = new AV.Query(Counter);
	$(".leancloud_visitors").each(function() {
		var url = $(this).attr("id").trim();
		query.equalTo("url", url);
		query.find({
			success: function(results) {
				if (results.length == 0) {
					var content = $(document.getElementById(url)).text() + ': 0';
					$(document.getElementById(url)).text(content);
					return;
				}
				for (var i = 0; i < results.length; i++) {
					var object = results[i];
					var content = $(document.getElementById(url)).text() + ': ' + object.get('time');
					$(document.getElementById(url)).text(content);
				}
			},
			error: function(object, error) {
				console.log("Error: " + error.code + " " + error.message);
			}
		});

	});
}

function addCount(Counter) {
	var Counter = AV.Object.extend("Counter");
	url = $(".leancloud_visitors").attr('id').trim();
	title = $(".leancloud_visitors").attr('data-flag-title').trim();
	var query = new AV.Query(Counter);
	query.equalTo("url", url);
	query.find({
		success: function(results) {
			if (results.length > 0) {
				var counter = results[0];
				counter.fetchWhenSave(true);
				counter.increment("time");
				counter.save(null, {
					success: function(counter) {
						var content = $(document.getElementById(url)).text() + ': ' + counter.get('time');
						$(document.getElementById(url)).text(content);
					},
					error: function(counter, error) {
						console.log('Failed to save Visitor num, with error message: ' + error.message);
					}
				});
			} else {
				var newcounter = new Counter();
				newcounter.set("title", title);
				newcounter.set("url", url);
				newcounter.set("time", 1);
				newcounter.save(null, {
					success: function(newcounter) {
					    console.log("newcounter.get('time')="+newcounter.get('time'));
						var content = $(document.getElementById(url)).text() + ': ' + newcounter.get('time');
						$(document.getElementById(url)).text(content);
					},
					error: function(newcounter, error) {
						console.log('Failed to create');
					}
				});
			}
		},
		error: function(error) {
			console.log('Error:' + error.code + " " + error.message);
		}
	});
}
$(function() {
	var Counter = AV.Object.extend("Counter");
	if ($('.leancloud_visitors').length == 1) {
		addCount(Counter);
	} else if ($('.post-title-link').length > 1) {
		showTime(Counter);
	}
});
</script>
  
<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?340874ba9357cbe81570aa4ac1185941";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-right 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta custom-logo">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">异想博客</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <h1 class="site-subtitle" itemprop="description">异想家博采众长的客厅！</h1>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://blog.jfz.me/2018/windows-hadoop-spark-hbase.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sandeepin">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="异想博客">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="异想博客" src="/images/avatar.jpg">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/windows-hadoop-spark-hbase.html" itemprop="url">
                  Windows下安装Hadoop、Spark和HBase
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-26T23:45:18+08:00">
                2018-03-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程开发/" itemprop="url" rel="index">
                    <span itemprop="name">编程开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
		  
			 
          
          
             <span id="/2018/windows-hadoop-spark-hbase.html" class="leancloud_visitors" data-flag-title="Windows下安装Hadoop、Spark和HBase">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors </span>
               
                 <span class="leancloud-visitors-count"></span>
				 <span>℃</span>
             </span>
          
		   
          

		  
            <div class="post-wordcount">
              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  
                </span>
              
            </div>
          
		  
          
 
        


        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1、Hadoop"><a href="#1、Hadoop" class="headerlink" title="1、Hadoop"></a>1、Hadoop</h2><p>安装Hadoop：下载hadoop-2.7.1.tar.gz，并解压到你想要的目录下，我放在D:\Library\hadoop-2.7.1。 配置Hadoop环境变量：HADOOP_HOME为%HADOOP_HOME%\bin;还有path加入%HADOOP_HOME%\bin; 将hadoop.dll复制到C:\Window\System32下。 Hadoop配置文件写法：</p>

          
        
      
    </div>

    <div>
      
    </div>
  


    <div>
      
    </div>


    <footer class="post-footer">
        
     <div>    
      
  </div>  
      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://blog.jfz.me/2018/kafka-install.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sandeepin">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="异想博客">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="异想博客" src="/images/avatar.jpg">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/kafka-install.html" itemprop="url">
                  Kafka安装教程
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-26T23:13:21+08:00">
                2018-03-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程开发/" itemprop="url" rel="index">
                    <span itemprop="name">编程开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
		  
			 
          
          
             <span id="/2018/kafka-install.html" class="leancloud_visitors" data-flag-title="Kafka安装教程">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors </span>
               
                 <span class="leancloud-visitors-count"></span>
				 <span>℃</span>
             </span>
          
		   
          

		  
            <div class="post-wordcount">
              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  
                </span>
              
            </div>
          
		  
          
 
        


        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1、CentOS上的配置——关防火墙"><a href="#1、CentOS上的配置——关防火墙" class="headerlink" title="1、CentOS上的配置——关防火墙"></a>1、CentOS上的配置——关防火墙</h2><p>查看firewall的状态：<strong>firewall-cmd –state</strong> 停止firewall：<strong>systemctl stop firewalld.service</strong> 禁止firewall开机启动：<strong>systemctl disable firewalld.service</strong> 查看默认防火墙状态（关闭后显示not running，开启后显示running）：<strong>firewall-cmd –state</strong></p>
<h2 id="2、安装kafka"><a href="#2、安装kafka" class="headerlink" title="2、安装kafka"></a>2、安装kafka</h2><p>下载地址：<a href="https://kafka.apache.org/downloads" target="_blank" rel="noopener">https://kafka.apache.org/downloads</a> <strong>wget <a href="http://mirrors.shuosc.org/apache/kafka/1.0.0/kafka_2.11-1.0.0.tgz" target="_blank" rel="noopener">http://mirrors.shuosc.org/apache/kafka/1.0.0/kafka_2.11-1.0.0.tgz</a></strong> <strong>tar -zxvf kafka_2.11-1.0.0.gz</strong> <strong>mv kafka_2.11-1.0.0 /usr/local/kafka/</strong> <strong>cd /usr/local/kafka/</strong> <strong>nano /usr/local/kafka/config/server.properties</strong> <em>broker.id=1</em> <em>log.dir=/data/kafka/logs-1</em></p>
<h2 id="3、启动ZK"><a href="#3、启动ZK" class="headerlink" title="3、启动ZK"></a>3、启动ZK</h2><p><strong>cd /usr/local/kafka/</strong> <strong>bin/zookeeper-server-start.sh -daemon config/zookeeper.properties</strong> 启动KAFKA服务 <strong>bin/kafka-server-start.sh config/server.properties</strong></p>
<h2 id="4、话题TOPIC"><a href="#4、话题TOPIC" class="headerlink" title="4、话题TOPIC"></a>4、话题TOPIC</h2><p>创建TOPIC： <strong>bin/kafka-topics.sh –create –zookeeper localhost:2181 –replication-factor 1 –partitions 1 –topic jfzpoi</strong> <strong>bin/kafka-topics.sh –list –zookeeper localhost:2181</strong> 如果报错网络不通，改ipv6的设置 <strong>nano /etc/hosts</strong> <em>127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4 vmcentos</em> <em>::1 ip6-localhost ip6-localhost.localdomain localhost6 localhost6.localdomain6</em> 查看TOPIC列表： <strong>cd /usr/local/kafka/</strong> <strong>bin/kafka-topics.sh –list –zookeeper localhost:2181</strong> 产生消息： <strong>cd /usr/local/kafka/</strong> <strong>bin/kafka-console-producer.sh –broker-list localhost:9092 –topic jfzpoi</strong> 消费消息： <strong>cd /usr/local/kafka/</strong> <strong>bin/kafka-console-consumer.sh –zookeeper localhost:2181 –topic jfzpoi –from-beginning</strong> <strong>bin/kafka-console-consumer.sh –zookeeper localhost:2181 –topic dataPackage –from-beginning</strong> 查看描述TOPICS信息： <strong>cd /usr/local/kafka/</strong> <strong>bin/kafka-topics.sh –describe –zookeeper localhost:2181 –topic jfzpoi</strong> 第一行给出了所有分区的摘要，每个附加行给出了关于一个分区的信息。 由于我们只有一个分区，所以只有一行。 “Leader”: 是负责给定分区的所有读取和写入的节点。 每个节点将成为分区随机选择部分的领导者。 “Replicas”: 是复制此分区日志的节点列表，无论它们是否是领导者，或者即使他们当前处于活动状态。 “Isr”: 是一组“同步”副本。这是复制品列表的子集，当前活着并被引导到领导者。 集群配置：<a href="http://www.54tianzhisheng.cn/2018/01/04/Kafka/" target="_blank" rel="noopener">http://www.54tianzhisheng.cn/2018/01/04/Kafka/</a></p>

          
        
      
    </div>

    <div>
      
    </div>
  


    <div>
      
    </div>


    <footer class="post-footer">
        
     <div>    
      
  </div>  
      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://blog.jfz.me/2018/mitinglunchu.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sandeepin">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="异想博客">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="异想博客" src="/images/avatar.jpg">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/mitinglunchu.html" itemprop="url">
                  西泽保彦《谜亭论处》
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-02-20T23:40:14+08:00">
                2018-02-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/分享推荐/" itemprop="url" rel="index">
                    <span itemprop="name">分享推荐</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
		  
			 
          
          
             <span id="/2018/mitinglunchu.html" class="leancloud_visitors" data-flag-title="西泽保彦《谜亭论处》">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors </span>
               
                 <span class="leancloud-visitors-count"></span>
				 <span>℃</span>
             </span>
          
		   
          

		  
            <div class="post-wordcount">
              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  
                </span>
              
            </div>
          
		  
          
 
        


        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>来自百度西泽保彦贴吧zmtrb翻译的作品。匠千晓系列不用多说，zmtrb的文章被删，不愧为垃圾百度干的好事，总是埋没精品推崇垃圾，现贴出我收集的部分翻译作品，希望zmtrb能坚持填完坑，找到更自由的分享平台。收集资料如下：</p>
<h2 id="《谜亭论处》"><a href="#《谜亭论处》" class="headerlink" title="《谜亭论处》"></a>《谜亭论处》</h2><p>第一章 被偷走答卷的问题 1. 注意到东西没拿落在职员室的时候，边见祐辅已经开车离开了学校停车场，奔行在夜晚的大街上了。路边的灯彩宛如能激起人思恋之情的女性的艳丽微笑，在他的视野中留下残像一掠而过。 现在要不要回学校呢，祐辅有点犹豫。看了下驾驶席的数字时钟，还有几分钟就是八点了。放学后，他留在职员室给昨天刚进行的周测验的试卷打分。以前总是拖很久才把试卷发回给学生而被他们抱怨，这次奋发了一把一口气阅完卷，所以才留到这么晚。 稍微犹豫了下，结果祐辅还是开车返回了学校。“啊呀”，他不由得对自己的好色之心而咋舌，虽然没有任何人看见，还是挠着头发露出想要蒙混过关的笑容。实际上落在职员室的东西也不是什么贵重品，而是在职员室里坐在自己旁边的同事今天借给他的AV。 “这个很棒哦”，英语教师稻叶嘉彦一边把录像带交给祐辅，一边从嘴里漏出“呵呵呵”的奇妙笑声。因为用手捂着嘴的关系，原本就如同鱼板的断面图般的眼睛在金属框架的眼镜后面显得更突出了。“肯定会让你喷鼻血喷到贫血的哦，还有，这个伪装很赞吧，对吧，对吧” 录像带的标签上用文字处理机打印着“大怪兽哥斯拉”、“哥斯拉的逆袭”之类过去的特摄电影的标题。看来比起录像带的内容，稻叶更想用伪装的标签来挑起祐辅的兴趣。 不管怎么说，过去多次观赏了稻叶的“收藏品”的祐辅这次也颇为期待。没有这卷带子今晚就不知如何度过了。 说起来这个带子今天不看明天看不是也行吗，但是祐辅无论如何也想在今天看完。也不是等不及到明天了，只是明晚和好久不见的大学时代的学弟约好了一起喝酒。要问为什么不干脆和学弟一起看呢，那是因为两个寂寞的大老爷们聚在一起喝酒看AV，实在有违祐辅的“美学”，这种东西就该一个人在密室里偷偷欣赏才是。总而言之，明晚不行的话那就只有今天或后天了。对于性急的祐辅而言只能不厌其烦地返回学校了。 从大街通向住宅密集区的岔道中间一带就是就是祐辅工作的丘阳女子学园了。这是一所初中高中一贯制教育的私立学校。把车停在稍微开着的校门前，祐辅抬头看向被黑夜完全笼罩的白色校舍。好像还有谁在的样子，二楼的职员室的灯还亮着。 刚刚进入十月，白天的时候还执拗地缠绕在身上的夏日余温，到了晚上就完全地雾散而寒意袭人了。在一不当心就可能会感冒的夜风中，祐辅没关引擎就下了车赶往校舍。 穿过中庭时，突然眼前出现了数个异样的高大人影般的东西，身体不由得一缩。 仔细一看原来是美术部学生制作的立体作品群。文化祭将近，以事前展示的形式装饰在这里。不仅是文化祭，运动会也临近了。对祐辅这些男性教师是令人头痛的季节。两个活动重叠的话，平时对外隔绝的禁断的女学园向一般大众开放的机会也就大大增加了。 丘阳女子学园创立近百年，是一所规格与传统兼备的学校。从祐辅的祖父时代，不，是更以前起就是名门闺秀入学的“温室”，这样的印象在当地根深蒂固。只要穿着丘阳的制服，就算是丑女也会受到男生们的追捧——这是来自公立学校的女学生们的坏话。总之男人们对于丘阳这个名头抱着过剩的幻想（实际上在此任职目睹了实态之前的祐辅也是其中一员），闭锁保守的校风更是加剧了这一理想化。 因此，趁着运动会与文化祭之类外部人员能够光明正大地进入学园内部的稀有机会，不知从哪儿冒出来的年轻男性们蜂拥而至。理所当然的，其中也会混着些不正经的男人，必须将这种变态预备军从学园里轰出去的事态绝不少见。为此，担任监视者的男性教师们即将迎来一年之中最为伤神的季节。 祐辅进入校舍，爬上昏暗的楼梯。职员室的门打开着，灯光照到了走廊上。在这个时候还没有任何可疑之处，但是为什么会想要在进入职员室之前偷窥一下里面的情况呢，是感到什么“气息”了吗。事后回想起来，自己也不明白，也许是出于一种内疚心理吧——身为女子学校教师这一圣职中的圣职，却为了取AV这种淫秽物品而特意返回学校，万一被学生们知道了可真是要羞愧而死了。 突然祐辅吃惊地停下了脚步，因为有人正站在他的桌子旁边。不，准确地说是他隔壁桌子的旁边。祐辅右边相邻的桌子是稻叶嘉彦，左边则是名叫我孙子铃江的中年国语教师。她就是伫立在我孙子铃江的桌子前。 她名叫尼岸须美子，与祐辅一样担任国语教师。今年三月在东京有名的私立大学毕业后来此赴任，而且听说是毕业于这所丘阳学园。简直像是经过测量般的八头身，加上闪耀着绿色光泽的长长的黑发，平时一直维持着生气似的表情，大概是在担心发笑时会露出皱纹吧，总之是个异样的惊人的美女，其面无表情似乎是在瞪视着这个世界，不让任何人对她的美抱有异议。 职员室里只有须美子一人。她的侧脸看起来比平时还要僵硬。但比起这个来，祐辅更在意的是她手里拿着的东西。须美子露出奇妙的像是钻牛角尖似的表情，正要把鼓起的信封放到我孙子铃江的桌子上。正好和放入测验答题纸的信封是同样的尺寸。角度的关系看得不是很清楚，大概是抱着二、三袋的样子。 “啊。。。你好”虽然完全不明白其中的意义，但祐辅模糊地感觉到自己看见了不该看的事情。糟糕。原本就是难以应对的对象。明明都是国文教师，但因为觉得难以接近的关系，祐辅和尼岸须美子至今为止一次都没有交谈过。话虽如此，也不能一句话不说就转身离开吧：”老师你工作到这么晚啊，真、真是辛苦了，啊哈哈“ 用笑容表示自己没有恶意，总之蒙混过去就好了——祐辅的这种期待完全落空了。像是冻结般的眼眸仍旧一眨不眨地注视着祐辅的脸。 “那、那个”，不仅仅是她的面无表情，还有她身着的高价套装也对祐辅起到了压迫的作用。当然祐辅无法区分其品牌是INGEBORG还是香奈儿什么的，他只是觉得这绝对不是会出现在大甩卖中的廉价商品。“那个，老师已经完成了吧，这次周测验的打分” “是的”须美子缓缓地点了点头。这是她头一次对祐辅说的话语。宛如歌剧演员般凛然而响亮的声音。又或者是安静的职员室更加深了这种感觉，“今天早上已经发回给学生了，拜托班主任在早上的班级活动时间里发的。“ 正要把信封放到我孙子铃江的桌子上时，须美子像是想起什么似的环视周围。可能是感觉到了什么气息吧。扭头看向职员室入口的须美子突然和祐辅对上了眼。她畏缩地把本想放到桌上的信封抱回了胸前。因为面无表情的关系，她的动作像是上了发条的机械般不自然。 ”哦哦，你动作真快啊，我也得向你学习才行啊。哎呀哎呀，那个，所以说，那个，对了，平均分是多少？“ ”不到六十分“ ”咦，这可不行啊，太松懈了，真是太松懈了啊。哎呀哎呀，老实说我的学生也是差不多的分数。不过也没有办法吧，毕竟到了这个季节了啊。学生们脑子里都是即将到来的活动了。啊哈，啊哈，啊哈哈哈“ ”不好意思，已经很晚了。我告辞了“ 须美子耸着肩从一边挠头发一边高声笑着的祐辅身边穿过，离开了职员室。那几个信封也还是抱在胸前带走了。高跟鞋的声音在昏暗的廊下渐渐远去。她走过的时候，一股无法形容的甜腻香气从祐辅的鼻孔里直冲脑髓，视野中一瞬间染上了粉红色的烟霭。 回想起已经在回家路上的自己特意返回学校的理由，祐辅像是从梦中醒来一般。尼岸须美子那强烈到与毒气只有一线之隔的美貌，刺激到了祐辅微妙的男性心理，感觉有点难以下手去取那卷AV啊，祐辅叹着气走近自己的桌子。咦，放到哪里去了，对了，虽然贴了伪装的标签但也不敢放在外面，所以收进上锁的抽屉里去了。 想要取出钥匙的祐辅的动作突然停止了。（这是。。。），强烈的违和感缠上了他全身。但这究竟是什么原因，他一下子还没想明白，（这是。。。我的桌子。。。确实。。。没错。。。但是。。。有哪里不对） “噗”的一声，像是从轮胎里突然抽出空气般的声音从嘴里漏了出来，但他甚至没有余裕去察觉这是从自己嘴里发出的呻吟声。“嘎巴”一下压在自己桌上的祐辅像是在黑暗中摸索般在桌面上来回抚摸。 （没有。。。）像是感光的照片般全白的大脑中，只有这个单词空虚地回响。（没有。。。没有。。。没有。。。） 消失了，才批改完的周测验的答卷，三个班级的，全部都消失了。回去的时候确实把答卷都装入信封内，放在自己的桌上的，现在却无影无踪了。 （到。。。到哪去了），“丑闻”这两个大大的汉字在祐辅脑内的空洞里，像是除夕的钟声般“咣咣”地鸣响。（到哪里去了啊，喂喂喂喂，骗人的吧？是骗人的吧？拜托了说是骗人的啊！） 但不管再怎么找，三个班级的信封都不见踪影。祐辅语不成声地发出悲鸣，摇摇晃晃地跌落在椅子上。 “冷、冷静。。。”祐辅用手指揉着额头对自己说。“冷静、要冷静下来”。事态是一目了然的。有人偷走了周测验的答卷。这就好，不，一点也不好，总之从状况来看只能认为是被偷走了。不能从这个事实上移开眼睛，必须在此基础上考虑对策，对，没错。 问题是自己应该怎么做。嗯，究竟应该怎么处理这个事态。在考虑这个之前首先要搞清楚这算是什么程度的丑闻。祐辅拼命从混乱和恐慌中维持住自我。首先—— 首先是第一点。这是周测验，英语、国文、数学三个主要教科每周依次进行。这不仅仅是因为丘阳学园进行保守的大和抚子式的教育，也确保了它在县内名列前茅的高升学率。这周正好轮到国文。当然周测验的结果全部都会计入期末评价，但相比期中测验和期末测验等定期考察来说占的比重就小了。因此可以说比起定期考察的答卷被偷，这次的事态造成的伤害较小。 第二点——考虑到这，多少有点恢复冷静的祐辅再次脸色发青了。这就是问题了。祐辅确实批完了三个班级全体学生的试卷，但是还没有把分数记录下来，一个人都没有，平均分也还没有算，记分册完全空着，为了期末评价配点比率计算而输入电脑的工作也没有完成。本打算明天早上做的，因为祐辅明天早上第一节没有课，所以在发卷给学生前还有充分的时间一点一点地完成。 祐辅像被马踩扁的青蛙般无力地伏在桌上。“笨蛋，我真笨蛋”，祐辅一边摩擦着太阳穴一边挠着头发。为什么今晚不把分数记录下来啊，而且啊，就算是在职员室里，把答卷放在桌上不收起来也太大意了。现在再说这个也迟了。啊啊，怎么办。 就算占的比重比定期考察来的小，三个班级全体学生的分数就这么消失仍然是难以原谅的事态。这样一来学校大概就只有两种选择了：一。这次的国文周测验无效。二。重出一份试卷再测一次。不管选哪个，祐辅都是责任重大。不，责任重大是可以想象的，问题是重大到什么程度，祐辅因为缺乏经验而无法有更具体的想象。应该不会被立刻免职吧，但至少要做好惩戒处分的觉悟，是不是要递交请示去留的辞呈较好呢? 烦闷了一会儿，祐辅突然站了起来，终于有余裕去想是谁偷了答卷这个问题了。首先要怀疑的是学生。为了成绩而烦恼的学生想要修改答卷上的解答和分数也不是什么不可思议的事。不过，就算夜晚的职员室人少容易侵入，但对学生而言还是不愿靠近的“圣域”。随随便便地进入，将答卷偷走，还要装出毫不知情的样子，这需要相当的傻大胆。虽然无法断言学校中没有这样大胆的学生，但是这样的“豪杰”会在意区区测验的结果吗？祐辅这样想着。 犯人会不会是教师呢。。。还不能完全排除学生作案的可能性，但这样怀疑的祐辅开始在职员室里到处走动。不知不觉就变得蹑手蹑脚的祐辅一个个地观察教师们的桌子。没有什么目标，但也没法不这么做。每当在桌子和书架上发现相似的信封，就想说不定会是失窃的答卷，于是忍不住拿起来检查，但结果并没有这么幸运的事。就算真是同事偷了试卷，也不会蠢到放在自己桌上吧。 在宽敞的职员室里巡视了一圈后，祐辅再次束手无策了。那么，之后该怎么办呢，这样叹着气的时候，突然听见了像是微弱的哼哼声一样的声音，一看之下，发现通往复印室的门稍微开着一点，哼哼声好像是复印机工作时的声音。 2. 有人在吗。。。？祐辅从门缝间往里面窥看了一下，看见了一个男人的背影，耳朵上戴着立体声耳机，一边悠然自得地哼着歌一边一张张地大量复印着。是在制作上课用的练习试卷吗？看来他完全没有注意到祐辅在职员室里。 虽然没有看见脸，但从立体声耳机就能知道是谁了，是英语教师野岛淳，和之前的尼岸须美子一样是今年四月刚上任的新人教师。 对于这个野岛，祐辅也是难以应对，不过和尼岸须美子是完全不同意义上的。他毕业于著名大学，是位于日本首都的偏差值日本第一的某国立大学的文学部出身，父亲是县内最大的建筑企业野岛组的社长，家境非常富裕。他就是在这种无菌培养环境下长大的精英，也不知道是不是这个缘故，野岛这个男人，性格上有问题。 最大的证据就是他在学生中完全没有人气。一开始祐辅觉得很不可思议，野岛个子高，又拥有歌舞伎演员般的高鼻梁的容貌，再加上高学历和富裕的家境，肯定会吸引学生们的吧，这样想着的祐辅还有点嫉妒呢。但实际上学生们把他视如蛇蝎般地讨厌着，这真是难以理解啊。 在第一学期结束的时候，祐辅对此感到可以理解了。结业式那一天，青年教师和事务员们聚在一起召开酒会，年龄已经接近青年上限的祐辅也参与了，野岛和尼岸须美子也都出席。 在这次酒会里，野岛令人吃惊地自始至终戴着立体声耳机，完全没想要参与会话。同事要给他倒酒，他也无动于衷佯装不知，有时甚至显出露骨的不快表情。看到之后祐辅明白了，这个男人是缺乏协调性的幼儿一般的性格。 不仅如此，二次会（译者注：酒会结束后换个地方再开第二场）的时候，座位自由决定，野岛毫不犹豫地凑到尼岸须美子的身边。店里的音乐太吵，祐辅听不见他对须美子说了些什么，但他的表情变得和之前截然不同的和蔼可亲。不过，对同性冷淡，对女性亲切这一点上祐辅也有同样的倾向。从这个意义上来说，作为一个男性他也有正常的一面，祐辅安心了。 然而下一瞬间，他惊呆了——野岛就算是凑在须美子身边的时候，也没有把立体声耳机拿下来过。而且仔细观察后发现，他会主动去搭话的对象只有包括须美子和其它几人在内的美女组。除此以外的其它女性向他说话，就会受到露骨的无视，连旁观的祐辅都觉得扫兴的程度。觉得这家伙很奇怪的，当然不仅仅是祐辅一个人。如果他在和学生交流的时候也表现出这样明显的幼儿性格的话，就已经不是受人喜欢或讨厌程度的问题了吧。 数日前，从隔壁座位的我孙子铃江那里听说，学生间流行起了对野岛的爱车恶作剧。当然，祐辅在停车场看见过野岛的BMW。那个时候还想这个贷款可不得了，后来听说是他父亲当场付款买给他的。学生们踢踹这台BMW的轮胎，把冰激凌倒在挡风玻璃上，来发泄对他的郁愤之情。 “到了这种程度吗？”虽然是别人的事，祐辅也担心起来，询问铃江到。“野岛老师和学生们这么合不来吗？” “野岛太过偏心了”,铃江富态的脸表面上皱起眉头，眼镜下眯起的眼却难掩笑意。顺便一提，她是属于被野岛无视的女性之一。“不漂亮的女生，不管是向他提问还是哭鼻子什么的，都完全无视。反过来说对可爱的女生则是无原则地溺爱。我的天使啊，小猫仔啊之类，毫不害臊地这么称呼，而且还是在上课的时候。” “难道，这个算是性骚扰吗？” “没有什么难道不难道的，这个就是性骚扰“，嘎哈哈，铃江豪快地笑了起来。“完全把她们当成自己的女人了。还有传闻说他会选择看起来温顺的女生摸胸和屁股，虽然没有证据。以为是自己的后宫吗？对学生们而言已经是要怒发冲冠的程度了，不管是被无视的一方还是被溺爱的一方。那么露骨地narcissism“ ” narcissism？“ ”就是觉得自己非常可爱地自我陶醉着。要是使用了暴力的话，学生们也容易投诉了，不过他也算是个高智商罪犯，这就更加惹学生发火了。现在他那自豪的BMW已经被搞成废铁了吧？不知道还会发生什么，最近他也小心起来，乘公交来学校了” 回忆起这些话，祐辅悄悄地离开了复印室。仔细一想，现在野岛在做的大量复印应该也不是公务而是私事吧。看不出他是会留到这么晚热心工作的人，这样解释还比较合理。不管怎样，就算问野岛失窃答卷的事也是白费力气。 那么，之后要怎么办呢。想烦了的祐辅离开了校舍。今晚要是找不到答卷的话，只有向合适的对象说明事态了，之后再讨论对策。问题是首先该找谁商量呢？一下子就找校长、教头级别的实在有些胆怯，还是先找国文教科的主任或者同教科的前辈教师比较合适。烦恼了一会儿后，祐辅决定和我孙子铃江老师商量，她对这种程度的事应该不会慌乱吧。 祐辅这样想着走出校门，在人行道上走了一会后，突然停了下来。好像忘记了什么 —— 然后惊讶地想起来了。对了，车呢，把自己的车给忘了。本来打算拿了AV就立刻回来所以连引擎都没关。。。。。。 祐辅转身往校门前走，突然，像是被什么东西绊到一样，停了下来。大张着嘴，凝视着路灯照耀下的路面。那里什么都没有。祐辅确实是把他的国产轿车停在那里的，但现在却像是烟雾似的消失不见了。 被偷了。。。。。。接连遭到答卷和轿车失窃的双重打击，祐辅不由得跪倒在地。被偷了。。。被偷走了。确实，把钥匙插在车上，就像是叫人来偷一样。本来应该能在一分之内回来的，但是因为答卷失窃这个突发事件而不知所措，时间就这样过去了。。。 多么倒霉的一晚啊，真的是。。。回过神来，祐辅发现那卷AV倒是好好地抓在右手上。在这么动摇的状态下还把AV的事牢牢记在心里，祐辅觉得自己真是滑稽到不行。就算是死，色情录像也不能放手吗。。。一个人对着虚空苦笑着。这次真实亲身感受什么叫祸不单行了。 不知在原地发呆了多久，突然回过神来的祐辅看了下表，已经八点半了。算了，不管了。连给铃江打电话的事都忘了，祐辅步行着前往闹市区。在常去的小酒馆里大口大口喝着酒，总之先一醉解千愁吧。但是，偏偏在这种时候怎么喝也喝不醉。祐辅只能放弃这个打算，在十一点半左右就回家了。 在出租车上的时候，他终于想起来一件理所当然的事——公寓的钥匙没有了。和车钥匙串在一起插在被偷走的车上呢。而且祐辅所住公寓的管理人并不和他们住在一起，所以备用钥匙也没法马上拿到。 妈的，该怎么办啊。倒霉的时候，真的是倒霉到家了。感觉要哭出来了，下车的时候还自暴自弃地多给了小费。将错就错，今晚干脆在公园露宿得了。 但是，目送出租车离去后转向公寓时，祐辅不禁大叫出声。公寓前不可思议地停着一辆眼熟的轿车。祐辅擦着眼睛仔细窥看车牌，没错，是他的车，就是刚才在校门口消失不见的那辆。 祐辅像在做梦一样打开了车门。引擎已经关闭了，但自己的钥匙圈还插在上面。究竟是怎么回事啊，祐辅扭着脖子坐进了驾驶席。虽然喝了相当不少，但也不能就这么把车停在路上，必须停进停车场里。正要发动引擎的时候，他注意到了。 车内漂浮着些微甜腻的香气。从鼻孔里直冲脑髓，视野里一瞬间染上了粉红色，这种性感的香气确实是。。。。。。 祐辅甩了甩头，停止了思考。今天已经很累了。明天，用脑就等明天吧。倒是还记得要给铃江打电话的事，但已经这么晚了，而且酒劲也上来了，祐辅感觉随便什么都无所谓了。明天，等明天吧。好不容易把车停进停车场后，衣服也不换就这么钻进从来不叠的被褥里睡着了。 3. 第二天早上。祐辅一夜无梦，从熟睡中睁眼醒来，就立刻想起了答卷的事。“怎么办啊”，祐辅抱着宿醉的脑袋呻吟着。昨晚上没有向任何人报告答卷失窃的事，冷静地想想这实在是太糟糕了。没办法了，就报告说今天上班时才发现这件事的吧，祐辅怀着愧疚之情这么决定。 然而，上班后祐辅再次吃惊地下巴都要掉下来了，不由得扑倒在自己的桌子上。装着答卷的信封无可置疑地放置在桌上，就是自己昨天刚刚批改完的，三个班级的试卷。 放下心来的祐辅露出了破涕为笑般的复杂表情。“真的很棒对吧”，邻座的稻叶嘉彦似乎把他的表情当做了淫荡的微笑，发出“呵呵呵”的笑声道：“还有很多哦，欧美版的OO和XX等等，那个可厉害了。想看的话随时和我说”。（译者注：OO和XX似乎是AV术语的样子，翻不出来。。。） 听到他的话祐辅回过神来，慌慌张张地开始检查三个班级的试卷。没错，就算还回来了也不代表里面的东西就完全没事。说不定。。。。。。因为不详的预感而浑身发抖的祐辅仔仔细细地进行了检查。但是所有的答卷都在。难道是篡改了解答或分数？祐辅睁圆了双眼细看自己写下的红色笔迹。但也同样没有发现任何问题。 终于祐辅安下心来叹了口气，但随着而来的是更深的疑问。这究竟是怎么回事？原以为答卷被偷了，第二天却完璧归赵。就好像昨晚上自己的车一样。。。。。。想到这，祐辅下意识地寻找着尼岸须美子的身影。她正坐在远处自己的座位上。 须美子好像也在窥视着祐辅，两人突然对上了眼，她慌忙转开了视线。至今为止从未见过她这么慌张的样子，即使不愿意也越发怀疑起她来。 偷走自己车的毫无疑问就是须美子——祐辅这样确信。昨晚被扔在公寓前的车里漂浮的香气，那是须美子擦的香水。至少也是和她用的非常相似。她在职员室门口和自己擦肩而过，然后就把停在校门口的车开走了，这样假设不管从状况上还是从时间上来说都非常自然。 而且还有答卷的事。离开职员室时她抱在胸前的信封，那应该就是祐辅批改完的答卷吧。那么偷走答卷的犯人也是须美子了。大概就是这样了吧，想不出其它可能了，但是。 但是，须美子究竟为什么要做这样的事呢？偷走答卷开车逃跑，结果车当晚就归还了，答卷也在第二天一早放回了祐辅桌上，完全没有改动过。到底有什么理由要特意做这种事？ 祐辅的脑子被这个问题搅成一团浆糊，一整天都心不在焉。回过神来，发觉自己一直盯着须美子看都看累了。太过专心于思考这件事，以至于差点就忘了今天傍晚和匠千晓约好一起喝酒了。 4. 祐辅到达自学生时代起就经常光顾的小酒馆的时候，千晓已经进了可以说是指定席的小间里，一个人自斟自饮着。看见学弟这张像是在棉花糖上涂鸦般、毫无半点紧张感的脸，祐辅莫名其妙地生气气来。我都这么烦恼了，你这家伙也稍微给我动动脑子吧，这样想着把昨晚到今早发生的一连串事件详细地向他说明了。 …… <strong>(还有很多限于本小博客篇幅就不贴太多文字了，有兴趣的朋友可以和我邮件交流。)</strong> 其它作者拟列出的题目有： 4、被叫出来的婚约者的问题 5、不吸取教训的无礼之徒的问题 6、被关在室内的嫌疑犯的问题 7、打印出来的不幸之信件的问题 8、新啤酒之家的问题</p>

          
        
      
    </div>

    <div>
      
    </div>
  


    <div>
      
    </div>


    <footer class="post-footer">
        
     <div>    
      
  </div>  
      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://blog.jfz.me/2018/bushiheliaolidishaonv.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sandeepin">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="异想博客">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="异想博客" src="/images/avatar.jpg">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/bushiheliaolidishaonv.html" itemprop="url">
                  白井智之《不适合料理的少女》
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-02-20T22:51:39+08:00">
                2018-02-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/分享推荐/" itemprop="url" rel="index">
                    <span itemprop="name">分享推荐</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
		  
			 
          
          
             <span id="/2018/bushiheliaolidishaonv.html" class="leancloud_visitors" data-flag-title="白井智之《不适合料理的少女》">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors </span>
               
                 <span class="leancloud-visitors-count"></span>
				 <span>℃</span>
             </span>
          
		   
          

		  
            <div class="post-wordcount">
              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  
                </span>
              
            </div>
          
		  
          
 
        


        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>来自豆瓣hayashi(林国立？)民翻的推理短篇。白井的小说以变态出名，可惜他的作品目前还没有中文作品出版，哈哈，估计以他的风格也很难在大陆出版吧。网上偶然读到这篇民翻，算是对白井风格的唯一认识渠道。自己很喜欢这种风格，于是在博客备份一篇，供自己以后重读。原文如下：</p>
<h2 id="《不适合料理的少女》译者说明："><a href="#《不适合料理的少女》译者说明：" class="headerlink" title="《不适合料理的少女》译者说明："></a>《不适合料理的少女》译者说明：</h2><p>处女渣翻，请不吝赐教。 这个短篇发布在2015年12月的「小説宝石」杂志上，原作题目是「料理には向かない少女」。</p>
<h2 id="《不适合料理的少女》正文："><a href="#《不适合料理的少女》正文：" class="headerlink" title="《不适合料理的少女》正文："></a>《不适合料理的少女》正文：</h2><p>[第一天] 睁开眼睛的时候，身上都是血的两名全裸少女正并排站在一起看着自己。 好像是从很高的地方掉下来了吧，doroshi从未经历过此番苦楚的身体发出痛苦的悲鸣。几乎痛到不能呼吸，就算张开嘴巴，也完全发不出声音。大口大口地吸气，夹杂着呕吐物和排泄物气味的恶臭却一阵阵地往鼻孔涌来。 见到从高处坠入的doroshi，两名少女一点不见惊讶，自顾自轻声地商量着什么事情。其中的一位颊骨突出，看起来像是拒食症患者；另一位则胖得像熟透的西红柿，每一次呼吸都会连带晃动下巴的赘肉。两人看起来都和doroshi一样是十几岁的年纪，光滑的胴体上满是鲜血和污物凝固后的痕迹。 “那么，我动手了。” 胖少女简短地交待后，转过头骑在了doroshi的裸体上，将一根足有三米长的巨型蚯蚓一样的东西缠在doroshi脖子上，两手慢慢地发力。脖颈被这干瘪的条状物绞紧，气管被压迫，苦味渐渐在口中扩散开来，扭动身体想要逃开，铅一样的少女却一动也不动。doroshi睁开眼睛，奋力挣扎，正好和咬紧牙关俯视自己的胖少女四目相对。 “等一下。” 病人一样的少女这么说着，出手阻止了胖少女的绞杀。胖少女放下巨型蚯蚓，又和病少女说了些什么，然后慢慢地从doroshi身上挪开。doroshi按着喉咙，还是一副喘不过气的样子，病少女于是双手插进doroshi的腋下，将她拉过来平躺在地板上。 “seruma死了” 病少女一边坐下一边轻声嘀咕。顺着她的方向往左边看，doroshi才发觉自己刚才摔倒的地方旁边躺着另一位头部已经扭曲的少女。 “那她就这样没问题么？” 胖少女用闪烁的眼神盯着doroshi，向同伴征求意见。 “不杀她也可以。” 病少女此言一出，胖少女抖了抖肩膀，明显是松了一口气。虽然还搞不清楚状况，但暂时没有性命之虞这件事，doroshi是可以确定了。 稍稍安心的同时，几个疑问一齐涌上来：这个幽暗的场所是什么地方？她们都是些什么人？为什么全员都裸着？这几天的记忆像罩上了雾一样模糊不清，唯独知道这样的地方不可能是自己的居所。 十几秒的沉默。 地板突然开始摇动，和下水道施工时一样的咣咣声让屋子里的空气都震动起来。两位少女一点也不惊讶，只是站靠在墙壁上。 再次向周围打量，墙壁表面的水泥已经开始脱落的这个幽暗房间里摆放着三个巨大的玻璃筒。房间是三角形，每个角各放置一个玻璃筒，每个筒里都有几名看上去十几岁的少女，自己也身处其中的一个玻璃筒中。房间的中央有一个巨大的熔炉一样的圆洞，上面只架着一把生锈的梯子，圆洞深处可见的只有无边的黑暗。 机器音从doroshi右边的玻璃筒中传出，筒中五名全裸的少女像在蜂巢中劳作一样左右晃动，咣咣的声音越变越大了。 “还是不要看比较好。”胖少女有些忧郁地低声提醒。 随即，血液像花洒里的水一样从少女们身体里喷涌出来，四肢和身体相继爆裂，涌出的内脏被绞成碎块，五名少女瞬间血肉交融，骨块和肉片铺满了玻璃筒的地面。 机器音停止后，右边的玻璃筒伴随着吱吱吱的摩擦声缓缓升起，在高约五米的地方开始倾斜，散落在玻璃地板的骨肉借着血液的润滑集中到一处，随着玻璃筒的倾斜，少女们的血肉从筒中溢出，依次掉入房间中央的圆洞里面。 —————————— 三十分钟过后，早先的剧痛渐渐缓和，没有大量的出血和骨折，doroshi已经算是幸运的了。两位少女看上去好像也没有再度袭击自己的意思，与身体上的疼痛相比，眼前和“正常”二字相去甚远的状况引起的混乱和不安更让doroshi感到在意。 在doroshi自己所在的玻璃筒里，并不是只有doroshi和两位少女，圆筒的一个角落里还堆满了数不清的少女的尸体，因为一个个叠在一起，所以无法看清脸部。只靠身体轮廓辨别的话，倒是可以确定都是十几岁的少女。眼前的这幅情景，就跟在图书馆看到的波兰集中营照片上的惨状差不多。 “那个，你们是谁？”doroshi用手掌遮住大腿间的部分，慢慢地起身。 “刚才猛绞你的脖子，真是抱歉。我是nina。”胖少女一边抚弄自己些微粘住的红发一边回答。即使只是轻轻咳嗽，也会让腹部和乳房的肉一齐动起来。doroshi自报家门后，她又接过话头介绍起自己的瘦同伴：“这位是reira。” 名叫reira的瘦少女，此时正把刚刚头部扭断的少女叠到比自己还高的少女尸山的顶部。 “只问你一个问题。你已经出不去了，是想现在死，还是要在这个晦暗的虫箱一样的地方活下去？你选哪一样？”reira用盛气凌人的声音提问完，就势坐在doroshi身前，左手无名指上的黄铜戒指闪闪发光。 “活、活下去……我想活下去。” “这样啊。那么一定要遵守规则才行噢，为了活下去一定要守规则，没有别的办法。这个胖子刚来了六天，我已经在这里十七天了，就是因为掌握了规则才活了下来。” “那，要忍耐到什么时候呢？” “我怎么知道，能从这个食品加工机里逃出去的家伙一个也没有。一定要设想一种情况的话，应该就是这个容器被尸体塞满到溢出的时候吧。” “食品加工机？” “不知道么？就是把食材切成很小的一块一块的机器啊。” “大概和绞肉或切鱼时用的搅拌机是一类东西。”nina补充道。 “你也看到那些来回转动的刀刃了，应该明白的吧。这里的三个玻璃容器其实就是人肉食品加工器。千万别问我是谁造出来的这种东西，问也是白问。每一个玻璃筒每天都会投下一名十四岁的少女，一共有三个容器，所以每天共计投下少女三名。然后，达到一定数量之后，机器就会开始运转，把玻璃罩里的人都变成肉末。”reira指着身后的罩子向doroshi说明。 半径大约三米的玻璃筒中央，竖立着一根直径约为一米的竿子。齐腰处插着两片点对称排列的刀片，长度一直延伸到doroshi的头顶，灰色的刀刃散发着黯淡的光。 “我掉入玻璃筒的时候，这里还一个人也没有。现在重新想想，应该是前一天刚绞过一次肉的缘故吧。从那以后每天都会有一名少女掉下来，大家无论肤色还是住所都相差甚远，唯有的共通之处是刚好大家都是十四岁。看到另外两个容器的情景，我们察觉到只要凑齐五个人，机器就会开动。想要逃走却发现天花板高得不行，总之是想不到别的办法，只能等死了。 但是第四天掉落的少女却因为撞到头而死掉了，第二天又有一名少女掉落，但机器却没有开动。于是我们明白了凑足的五人必须都是活人，刀片才会运转。” reira停下解说，拾起掉落在脚边的指甲丢向墙壁。玻璃筒的外围形成了一块小型洼地，沉积着呕吐物、排泄物和其他脏东西。 “后来，怎么样了？” “当然免不了一场杀戮，第二天之前不把其中的某人杀掉的话，大家通通都要变肉末。最后有两个人死掉了，包括我在内的三个人活了下来，其中就有你刚刚压死的seruma。” seruma就是刚才被reira抬到尸山的少女了，不幸当了doroshi的垫背而命丧黄泉。自己直接造成了别人的死亡这件事，也让doroshi的呼吸紧促起来。 “你也别太在意了，本来就是懈怠自己头上状况的seruma的错。杀人的时候一直后悔的话，在这里可是活不下去的。” “要说杀人的话，我也是一样在干的噢。”nina脸上泛着僵硬的笑说道。 “那么，规则到底是什么？” “轮流杀死掉进这个玻璃筒的少女。为了不让活人数量增加，最好在人刚刚掉进来的时候就杀掉。明天就由你来杀吧”，reira冷漠地说明着，“如果你不杀的话，我会先和你做个了结的。” —————————— 既没有钟也没有手机，具体的时刻根本无从知晓。除了戒指和耳钉，身上的衣服和配饰全部被取下。doroshi继续用手掌遮住两腿之间慢慢地站起来，无所事事地向筒外眺望。 天花板上吊着的裸露灯泡为三个玻璃筒投下一层稀薄的色彩。右边的玻璃筒现在空着，地板上还粘着少量模糊的血肉。与此形成鲜明对比的，左边圆筒里有四个少女正靠在一起。还没有开始互相残杀，是因为还没能明白食品加工机的规则吧？要是知道明天会发生什么的话，绝不可能像现在这样和谐。 将视线移回自己所在的玻璃筒，角落里的少女尸山正炫耀着自己大写加粗的存在感。像是垃圾场里的垃圾袋一样，少女们的尸体随意的叠在一起，数了一下，尸体一共是十四具。其中的大多数都是在掉进食品加工机之后旋即被reira或者seruma杀死的吧。 doroshi又抬头望向黑暗的顶部，自己离容器的上端大概还有六、七米左右的距离，就算弹跳力再怎么好也根本够不到边缘。要是墙壁上有凹凸的部分的话，自己的那点攀岩技能倒是可以派上用场，不巧的是别说凹进或凸起了，玻璃壁上连一点刮痕都没有。 这样一来，doroshi又把目光投向筒中的竿子，高约八十厘米的地方插进的刀刃划着弧线向上方弯曲，小心避开刀刃的话，是有可能上到刀具上的。从那里像投套索一样投出巨型蚯蚓——其实是人的肠子的话，也许可以够到容器的边缘。但是又没有能勾住肠子的地方，还是无望逃出生天。 doroshi忽然回过神，对正在冷静思考眼前状况的自己感到大为惊讶。哪怕稍稍有一点实感，自己大概会以为正在做梦或者演剧吧，但反而是因为实在太荒诞了，怀疑自己眼睛的心思一次都没有过。真讨厌既没有发狂也没有精神错乱的自己啊。 “doroshi还记得来这里之前的事情么？”背后的声音来自胖得跟桶一样的少女nina。 “虽然有些记不清楚，但午后跑到学校旁边的海这一点倒是可以确定。自由潜水（注：即不戴呼吸设备的闭气潜水）大赛就要开始了，去那里练习来着。还能记得海水凉凉的触感，之后的事情就不确定了。” doroshi谨慎地遣词造句，去海边后的记忆都丧失了是没错，练习潜水的事情却不是真的。 “没有听到救护车汽笛声的记忆么？” “这么一说好像确实有这么回事呢。”含糊不清地点着头回应的doroshi，感到鼻腔了散开一阵稀薄的薄荷香气。看病时经常去的隔壁街区医院里前院长的夫人，因为经常要使用芳香疗法治病，常常让精油的香气飘得到处都是，引得附近街坊几次三番前去投诉。恐怕自己在海里失去意识之后，就是被搬送到了那间医院吧。 “因为还留有去过诊疗室的记忆，所以在那之前应该被搬上过救护车吧。” “果然是这样么？我也记得自己被抬上过担架。那之前的一天和男朋友大吵了一架，自暴自弃地喝多了威士忌。回家的途中被车撞到了，虽然好像只是稍微撞伤了脚，却一下子来了几辆救护车和出租车。但是从那之后的事我也不记得了。” 听了这番话，doroshi才发现nina的右小腿上红黑色的淤血，行动也有些笨拙。 “我怀疑那些救护车是假的。” “恩，确实有可能是劫持我们的变态假扮的。” “真是搞不懂啊。” 躺下盯着天花板的reira突然说话了，年纪明明差不多，口气却还是那么冲：“我在校庭的草坪上小睡，惊醒时就发现自己在这里了。脑子不行的话再怎么思考都是没有用的。” “睡着的时候受了很重的伤，于是被搬上了救护车，这也不是没有可能嘛。” “喂，我不是说过再怎么推测都没有用的么？犯人是政府也好恶魔也好外星人也好，我们不是一样逃不出去么？要是有逃出去的方法就告诉我，不然赶紧闭嘴。” “reira还记得被送到这里之前的事情么？”doroshi试着打开话匣子。 “记得是记得，不过我不会告诉你的。”reira回答时眉头都不皱一下。 “reira真会刁难人，是AB血型吧？”nina有些嫌弃地问道。 “是的噢。” “啊，果然是这样。那一定有弟弟或者妹妹吧，绝对是这样。”nina说得唾沫星子四溅。 reira有点扭捏地答道：“我是独生女。” “诶？真是意外呢。” “光靠血型就能明白性格什么的，别再说这些东洋人令人作呕的鬼话了。你就是这样才被男朋友甩掉的不是么？”reira狠狠地反击。 “好过分，才不是这样呢！”nina急得直跺脚，象一样的屁股随之剧烈抖动。 “别吵了，喷气也差不多要来了。明天见。”reira保持着刚才的姿势闭上了眼睛，照明合拍地转暗了，头顶响起了和喷射灭火器时一样的泄漏声。 “一到晚上这里就会喷出催眠气体噢。”doroshi的脚边传来nina的声音，不知道什么时候起她已经躺下了。 虽然觉得应该还没有那么快入夜，但因为没有时钟，也无法确认自己的想法。感觉到两名少女身体和附近洼地里粪便的doroshi也就势躺下，氨水一样的恶臭一阵阵涌向鼻腔。 拼命按下不断涌上心头的不安，doroshi闭上了眼睛。 —————————— …… <strong>(限于博客服务器的负载考量，不想贴太多文字，有兴趣去豆瓣原作者那看吧！)</strong></p>

          
        
      
    </div>

    <div>
      
    </div>
  


    <div>
      
    </div>


    <footer class="post-footer">
        
     <div>    
      
  </div>  
      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://blog.jfz.me/2017/cpp-winsock2-tcp.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sandeepin">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="异想博客">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="异想博客" src="/images/avatar.jpg">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/cpp-winsock2-tcp.html" itemprop="url">
                  C++封装的基于WinSock2的TCP服务端、客户端
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-08-29T16:34:55+08:00">
                2017-08-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程开发/" itemprop="url" rel="index">
                    <span itemprop="name">编程开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
		  
			 
          
          
             <span id="/2017/cpp-winsock2-tcp.html" class="leancloud_visitors" data-flag-title="C++封装的基于WinSock2的TCP服务端、客户端">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors </span>
               
                 <span class="leancloud-visitors-count"></span>
				 <span>℃</span>
             </span>
          
		   
          

		  
            <div class="post-wordcount">
              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  
                </span>
              
            </div>
          
		  
          
 
        


        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>无聊研究Winsock套接字编程，用原生的C语言接口写出来的代码看着难受，于是自己简单用C++封装一下，把思路过程理清，方便自己后续翻看和新手学习。 只写好了TCP通信服务端，有空把客户端流程也封装一下。 先上主函数：</p>
<p>// main.cpp : 异想家sandeepin poi！  </p>
<p>#include “stdafx.h”  </p>
<p>#include <iostream><br>extern int JTCPserver();<br>extern int JTCPclient();<br>int main()<br>{<br>    JTCPserver(); // 两者选一<br>//  JTCPclient();<br>    return 0;<br>}  </iostream></p>
<p>JTCPserver.cpp内容：</p>
<p>// JTCPserver.cpp : 蒋方正封装的TCP服务端  </p>
<p>#include “stdafx.h”  </p>
<p>#include <iostream>  </iostream></p>
<p>#include <string>  </string></p>
<p>#include &lt;WinSock2.h&gt; // WinSocket   </p>
<p>#include &lt;WS2tcpip.h&gt; // IP地址转换用到inet_pton  </p>
<p>#pragma comment(lib,”ws2_32.lib”)<br>using namespace std;  </p>
<p>// 【1】初始化WinSock<br>bool initWinSock();<br>// 【2】创建socket<br>bool createSocket(SOCKET &amp;listenScok);<br>// 【3】socket绑定本机地址信息<br>bool bindIPandPort(SOCKET &amp;listenScok, const string ip, const unsigned short port);<br>// 【4】侦听socket，接收客户端请求<br>bool listenSocket(SOCKET &amp;listenScok);<br>// 【5】等待客户端连接-阻塞<br>bool waitClientConnect(SOCKET &amp;listenScok, SOCKET &amp;clientSock);<br>// 【6】接收数据-阻塞<br>bool receiveData(SOCKET &amp;clientSock, string &amp;data);<br>// 【7】停止套接字的接收、发送<br>bool shutdownSocket(SOCKET &amp;clientSock);<br>// 【8】发送信息<br>bool sendData(SOCKET &amp;clientSock, const string &amp;data);  </p>
<p>int JTCPserver()<br>{<br>    SOCKET listenScok;  // 服务端Socket<br>    SOCKET clientSock;  // 客户端Socket<br>    string data;        // 收到的数据  </p>
<pre><code>// 【1】初始化WinSock  
initWinSock();  
// 【2】创建socket  
createSocket(listenScok);  
// 【3】socket绑定本机地址信息  
bindIPandPort(listenScok, &quot;127.0.0.1&quot;, 1994);  
// 【4】侦听socket，接收客户端请求  
listenSocket(listenScok);  

// 坐等客户端连接  
bool isClientSockConnect = false;   // 是否有客户端连进来  
bool isReceiveData = false;         // 是否接收数据成功  

while (true)  
{   
    if (!isClientSockConnect)  
    {  
        // 【5】等待客户端连接  
        isClientSockConnect = waitClientConnect(listenScok, clientSock);  
    }  
    else  
    {  
        if(!isReceiveData)  
        {  
            // 【6】接收数据-阻塞  
            isReceiveData = receiveData(clientSock, data);  
            // 如果接收数据失败则断开  
            if(!isReceiveData)   
            {  
                // 【7】停止套接字的接收、发送  
                shutdownSocket(clientSock);  
                cout &lt;&lt; &quot;等待客户端再连接...&quot; &lt;&lt; endl;  
                isClientSockConnect = false; // 可以重连了  
            }  
        }  
        if(isReceiveData &amp;&amp; data != &quot;jfzpoi&quot;  &amp;&amp; data != &quot;@end#&quot;)  
        {  
            isReceiveData = false;  
        }  
        if(isReceiveData &amp;&amp; data == &quot;jfzpoi&quot;)  
        {  
            // 【8】发送信息(收的数据为jfzpoi)  
            sendData(clientSock, &quot;sandeepin!\\r\\n&quot;);  
            isReceiveData = false;  
        }  
        if (isReceiveData &amp;&amp; data == &quot;@end#&quot;)  
        {  
            // 【9】关闭相关  
            int err;  
</code></pre><p>//              err = shutdown(listenScok, 2);<br>//              if (err == SOCKET_ERROR)<br>//              {<br>//                  cout &lt;&lt; “关闭失败！” &lt;&lt; endl;<br>//              }<br>                // 关闭套接字，释放资源<br>                err = closesocket(listenScok);<br>                if (err == SOCKET_ERROR)<br>                {<br>                    cout &lt;&lt; “关闭socket失败！” &lt;&lt; endl;<br>                }<br>                // 停止使用WinSock库，释放对应资源<br>                if (WSACleanup() != 0)<br>                {<br>                    cout &lt;&lt; “WSA清空失败！” &lt;&lt; endl;<br>                }<br>                cout &lt;&lt; “关完了，坐等关机！poi” &lt;&lt; endl;<br>                return 0;<br>            }<br>        }<br>    }<br>}  </p>
<p>// 【1】初始化WinSock<br>bool initWinSock()<br>{<br>    WORD verision = MAKEWORD(2, 2);<br>    WSADATA lpData;<br>    int intEr = WSAStartup(verision, &amp;lpData); // 指定winsock版本并初始化<br>    if (intEr != 0)<br>    {<br>        cout &lt;&lt; “WinSock初始化失败！” &lt;&lt; endl;<br>        return false;<br>    }<br>    cout &lt;&lt; “WinSock初始化成功！” &lt;&lt; endl;<br>    return true;<br>}  </p>
<p>// 【2】创建socket<br>bool createSocket(SOCKET &amp;listenScok)<br>{<br>    // 创建侦听socket<br>    listenScok = socket(AF_INET, SOCK_STREAM, 0);<br>    if (listenScok == INVALID_SOCKET)<br>    {<br>        cout &lt;&lt; “socket创建失败！” &lt;&lt; endl;<br>        return false;<br>    }<br>    cout &lt;&lt; “socket创建成功！” &lt;&lt; endl;<br>    return true;<br>}  </p>
<p>// 【3】socket绑定本机地址信息<br>bool bindIPandPort(SOCKET &amp;listenScok, const string ip, const unsigned short port)<br>{<br>    // 制作sockaddr_in结构体<br>    // 在bind函数，connect函数里提到了套接字编程网络地址信息结构体const struct sockaddr和const struct sockaddr_i<br>    sockaddr_in hostAddr;<br>    hostAddr.sin_family = AF_INET;<br>    hostAddr.sin_port = htons(port);//转换成网络字节序<br>                                    //hostAddr.sin_addr.S_un.S_addr = inet_addr(SERVERIP);//转换成网络字节序<br>                                    //cout &lt;&lt; “net IP:” &lt;&lt; hostAddr.sin_addr.S_un.S_addr &lt;&lt; endl;<br>                                    /*<br>                                    inet_addr()版本太低，被弃用使用inet_pton(协议族，字符串IP地址，void目标in_addr<em>)<br>                                    头文件：WS2tcpip.h 
                                    </em>/<br>    in_addr addr;<br>    inet_pton(AF_INET, ip.c_str(), (void*)&amp;addr);<br>    hostAddr.sin_addr = addr;<br>    cout &lt;&lt; “ip(网络字节序):” &lt;&lt; addr.S_un.S_addr &lt;&lt; endl;<br>    cout &lt;&lt; “ip(常规形式):” &lt;&lt; ip.c_str() &lt;&lt; endl;  </p>
<pre><code>// 侦听套接字listenSock绑定本机地址信息    
int err = bind(listenScok, (struct sockaddr*)&amp;hostAddr, sizeof(sockaddr));  
if (err != 0)  
{  
    cout &lt;&lt; &quot;本地IP绑定失败！&quot; &lt;&lt; endl;  
    return false;  
}  
return true;  
</code></pre><p>}  </p>
<p>// 【4】侦听socket，接收客户端请求<br>bool listenSocket(SOCKET &amp;listenScok)<br>{<br>    // 设定套接字为侦听状态，准备接收客户机进程发送来的连接请求<br>    int err = listen(listenScok, 3);<br>    if (err != 0)<br>    {<br>        cout &lt;&lt; “socket监听失败！” &lt;&lt; endl;<br>        return false;<br>    }<br>    cout &lt;&lt; “监听客户端连接中……” &lt;&lt; endl;<br>    return true;<br>}  </p>
<p>// 【5】等待客户端连接-阻塞<br>bool waitClientConnect(SOCKET &amp;listenScok, SOCKET &amp;clientSock)<br>{<br>    sockaddr_in clientAddr;<br>    int len = sizeof(struct sockaddr); // 必须指定长度，否则会导致accept返回10014错误<br>                                       // accept会循环等待客户端连接<br>    clientSock = accept(listenScok, (struct sockaddr*)&amp;clientAddr, &amp;len);<br>    cout &lt;&lt; “客户端Socket编号:” &lt;&lt; clientSock &lt;&lt; endl;<br>    if (clientSock == INVALID_SOCKET)<br>    {<br>        cout &lt;&lt; “客户端连接失败！” &lt;&lt; endl;<br>        cout &lt;&lt; WSAGetLastError() &lt;&lt; endl;<br>        return false;<br>    }<br>    return true;<br>}  </p>
<p>// 【6】接收数据-阻塞<br>bool receiveData(SOCKET &amp;clientSock, string &amp;data)<br>{<br>    static int cnt = 1; // 接收数据编号-静态<br>                        // 通过已建立连接的套接字，接收数据 设定缓冲1024字节<br>    char buf[1024] = “\0”;<br>    // flags操作方式（0正常数据，MSG_PEED系统缓冲区的数据复制到所提供的接收缓冲区内，系统缓冲区数据未删除，MSG_OOB处理带外数据，通常用参数0即可）<br>    int buflen = recv(clientSock, buf, 1024, 0);<br>    if (buflen == SOCKET_ERROR)<br>    {<br>        cout &lt;&lt; “接收失败！” &lt;&lt; endl;<br>        return false;<br>    }<br>    // 一切正常则显示接收数据<br>    data = string(buf);<br>    cout &lt;&lt; “收到第” &lt;&lt; cnt++ &lt;&lt; “次，内容为:\n” &lt;&lt; buf &lt;&lt; endl;<br>    return true;<br>}  </p>
<p>// 【7】停止套接字的接收、发送<br>bool shutdownSocket(SOCKET &amp;clientSock)<br>{<br>    //（收完就关）停止套接字的接收、发送功能（0禁止接收，1禁止发送，2禁制接收发送）<br>    int err = shutdown(clientSock, 2);<br>    if (err == SOCKET_ERROR)<br>    {<br>        cout &lt;&lt; “关闭Socket失败！” &lt;&lt; endl;<br>        return false;<br>    }<br>    return true;<br>}  </p>
<p>// 【8】发送信息<br>bool sendData(SOCKET &amp;clientSock, const string &amp;data)<br>{  </p>
<pre><code>int err = send(clientSock, data.c_str(), data.size(), 0);  
if (err == SOCKET_ERROR)  
{  
    cout &lt;&lt; &quot;发送失败！&quot; &lt;&lt; endl;  
    return false;  
}  
cout &lt;&lt; &quot;发送数据为:\\n&quot; &lt;&lt; data &lt;&lt; endl;  
return true;  
</code></pre><p>}  </p>
<p>JTCPclient.cpp内容：</p>
<p>// JTCPclient.cpp : 蒋方正封装的TCP客户端代码  </p>
<p>#include “stdafx.h”    </p>
<p>#include <iostream>  </iostream></p>
<p>#include &lt;WinSock2.h&gt;    </p>
<p>#include &lt;WS2tcpip.h&gt;    </p>
<p>#pragma comment(lib,”ws2_32.lib”)<br>using namespace std;  </p>
<p>// 【1】初始化WinSock<br>bool initWinSockC();<br>// 【2】创建socket<br>bool createSocketC(SOCKET &amp;listenScok);<br>// 【3】连接到服务器<br>bool connectSocketC(SOCKET &amp;conSock, const string ip, const unsigned short port);<br>// 【4】发送数据<br>bool sendDataC(SOCKET &amp;clientSock, const string &amp;data);<br>// 【5】接收数据<br>bool receiveDataC(SOCKET &amp;clientSock, string &amp;data);  </p>
<p>int JTCPclient()<br>{<br>    SOCKET clientSock;  // 客户端Socket<br>    string data;        // 收到的数据  </p>
<pre><code>bool isCreateSocket = false;    // 是否创建了Socket  
bool isConnectSocket = false;   // 是否连上了服务器  
bool isSendDataOK = false;      // 是否发送成功数据  
bool isReceiveDataOK = false;   // 是否接收成功数据  

// 【1】初始化WinSock  
if(initWinSockC())  
{  
    while (true)  
    {  
        if(!isCreateSocket)  
        {  
            // 【2】创建socket  
            createSocketC(clientSock);  
            isCreateSocket = true;  
        }  
        else  
        {  
            if(!isConnectSocket)  
            {  
                // 【3】连接到服务器  
                connectSocketC(clientSock, &quot;127.0.0.1&quot;, 1994);  
                isConnectSocket = true;  
            }  
            else  
            {  
                if(!isSendDataOK)  
                {  
                    // 【4】发送数据  
                    isSendDataOK = sendDataC(clientSock, &quot;jfz hello\\r\\n&quot;);  
                }  
                else  
                {  
                    if(!isReceiveDataOK)  
                    {  
                        // 【5】接收数据  
                        isReceiveDataOK = receiveDataC(clientSock, data);  
                    }  
                    else  
                    {  
                        if(data == &quot;@end#&quot;)  
                        {  
                            WSACleanup();  
                            return 0;  
                        }  
                        isReceiveDataOK = false;  
                        isSendDataOK = false;  
                    }  
                }  

            }  
        }  
    }  
}  
return 0;  
</code></pre><p>}  </p>
<p>// 【1】初始化WinSock<br>bool initWinSockC()<br>{<br>    WORD verision = MAKEWORD(2, 2);<br>    WSADATA lpData;<br>    int intEr = WSAStartup(verision, &amp;lpData); // 指定winsock版本并初始化<br>    if (intEr != 0)<br>    {<br>        std::cout &lt;&lt; “WinSock初始化失败！” &lt;&lt; endl;<br>        return false;<br>    }<br>    std::cout &lt;&lt; “WinSock初始化成功！” &lt;&lt; endl;<br>    return true;<br>}  </p>
<p>// 【2】创建socket<br>bool createSocketC(SOCKET &amp;listenScok)<br>{<br>    // 创建侦听socket<br>    listenScok = socket(AF_INET, SOCK_STREAM, 0);<br>    if (listenScok == INVALID_SOCKET)<br>    {<br>        cout &lt;&lt; “socket创建失败！” &lt;&lt; endl;<br>        return false;<br>    }<br>    cout &lt;&lt; “socket创建成功！” &lt;&lt; endl;<br>    return true;<br>}  </p>
<p>// 【3】连接到服务器<br>bool connectSocketC(SOCKET &amp;conSock, const string ip, const unsigned short port)<br>{<br>    // 建立地址结构体<br>    sockaddr_in hostAddr;<br>    hostAddr.sin_family = AF_INET;<br>    hostAddr.sin_port = htons(port);//转换成网络字节序<br>                                    //hostAddr.sin_addr.S_un.S_addr = inet_addr(SERVERIP);//转换成网络字节序<br>                                    //cout &lt;&lt; “net IP:” &lt;&lt; hostAddr.sin_addr.S_un.S_addr &lt;&lt; endl;<br>                                    /*<br>                                    inet_addr()版本太低，被弃用使用inet_pton(协议族，字符串IP地址，void目标in_addr<em>)<br>                                    头文件：WS2tcpip.h 
                                    </em>/<br>    in_addr addr;<br>    inet_pton(AF_INET, ip.c_str(), (void*)&amp;addr);<br>    hostAddr.sin_addr = addr;<br>    cout &lt;&lt; “ip(网络字节序):” &lt;&lt; addr.S_un.S_addr &lt;&lt; endl;<br>    cout &lt;&lt; “ip(常规形式):” &lt;&lt; ip.c_str() &lt;&lt; endl;  </p>
<pre><code>// 向服务器提出连接请求  
int err = connect(conSock, (sockaddr*)&amp;hostAddr, sizeof(sockaddr));  
if (err == INVALID_SOCKET)  
{  
    cout &lt;&lt; &quot;连接服务器失败！&quot; &lt;&lt; endl;  
    return false;  
}  
return true;  
</code></pre><p>}  </p>
<p>// 【4】发送数据<br>bool sendDataC(SOCKET &amp;clientSock, const string &amp;data)<br>{<br>    int err = send(clientSock, data.c_str(), data.size(), 0);<br>    if (err == SOCKET_ERROR)<br>    {<br>        cout &lt;&lt; “发送失败！” &lt;&lt; endl;<br>        return false;<br>    }<br>    cout &lt;&lt; “发送数据为:\n” &lt;&lt; data.c_str() &lt;&lt; endl;<br>    return true;<br>}  </p>
<p>// 【5】接收数据<br>bool receiveDataC(SOCKET &amp;clientSock, string &amp;data)<br>{<br>    static int cnt = 1; // 接收数据编号-静态<br>                        // 通过已建立连接的套接字，接收数据 设定缓冲1024字节<br>    char buf[1024] = “\0”;<br>    // flags操作方式（0正常数据，MSG_PEED系统缓冲区的数据复制到所提供的接收缓冲区内，系统缓冲区数据未删除，MSG_OOB处理带外数据，通常用参数0即可）<br>    int buflen = recv(clientSock, buf, 1024, 0);<br>    if (buflen == SOCKET_ERROR)<br>    {<br>        cout &lt;&lt; “接收失败！” &lt;&lt; endl;<br>        return false;<br>    }<br>    // 一切正常则显示接收数据<br>    data = string(buf);<br>    cout &lt;&lt; “收到第” &lt;&lt; cnt++ &lt;&lt; “次，内容为:\n” &lt;&lt; buf &lt;&lt; endl;<br>    return true;<br>}</p>

          
        
      
    </div>

    <div>
      
    </div>
  


    <div>
      
    </div>


    <footer class="post-footer">
        
     <div>    
      
  </div>  
      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://blog.jfz.me/2017/qt-qaxobject-excel.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sandeepin">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="异想博客">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="异想博客" src="/images/avatar.jpg">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/qt-qaxobject-excel.html" itemprop="url">
                  Qt使用QAxObject快速批量读取Excel内容
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-05T16:28:15+08:00">
                2017-05-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程开发/" itemprop="url" rel="index">
                    <span itemprop="name">编程开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
		  
			 
          
          
             <span id="/2017/qt-qaxobject-excel.html" class="leancloud_visitors" data-flag-title="Qt使用QAxObject快速批量读取Excel内容">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors </span>
               
                 <span class="leancloud-visitors-count"></span>
				 <span>℃</span>
             </span>
          
		   
          

		  
            <div class="post-wordcount">
              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  
                </span>
              
            </div>
          
		  
          
 
        


        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>网上各种教程用的方法主要是如下这一句：</p>
<p>QAxObject * range = worksheet-&gt;querySubObject(“Cells(int,int)”, 1, 1 );</p>
<p>这种方法当然也行，可以一项一项地读，但是当读取数量很大的时候就很慢了，在我的电脑上测试读5000个数据大约168s左右。看资料找到一种批量读取的方法，经测试读10000行的数据才3s多，效果超级棒，充分发挥了QAxobject读取的优势。 核心代码在于这一句：</p>
<p>QAxObject *range = worksheet-&gt;querySubObject(“Range(QString)”, “B13:C1000”);</p>
<p>用Range(QString)实现选取一大块区域，一次性读一个数组出来当然快啦。 附上完整的源码供大家交流学习： pro中加一句：QT+=axcontainer 核心代码：</p>
<p>#include // 批量读取xls到map<br>int readEnvXlsFile(QString FileName, QMap&lt;QString,float&gt; &amp;map)<br>{<br>    QAxObject <em>excel = NULL;<br>    QAxObject </em>workbooks = NULL;<br>    QAxObject <em>workbook = NULL;<br>    excel = new QAxObject(“Excel.Application”);<br>    if (!excel)<br>    {<br>        qDebug() &lt;&lt; “EXCEL对象丢失!”;<br>    }<br>    excel-&gt;dynamicCall(“SetVisible(bool)”, false);<br>    workbooks = excel-&gt;querySubObject(“WorkBooks”);<br>    workbook = workbooks-&gt;querySubObject(“Open(QString, QVariant)”, FileName);<br>    QAxObject </em> worksheet = workbook-&gt;querySubObject(“WorkSheets(int)”, 1);//打开第一个sheet<br>    QAxObject <em> usedrange = worksheet-&gt;querySubObject(“UsedRange”);//获取该sheet的使用范围对象<br>    QAxObject </em> rows = usedrange-&gt;querySubObject(“Rows”);<br>    QAxObject * columns = usedrange-&gt;querySubObject(“Columns”);<br>    int intRows = rows-&gt;property(“Count”).toInt();<br>    int intCols = columns-&gt;property(“Count”).toInt();<br>    qDebug() &lt;&lt; “xls行数：”&lt;&lt;intRows;<br>    qDebug() &lt;&lt; “xls列数：”&lt;&lt;intCols;  </p>
<pre><code>// 批量载入数据，这里默认读取B13:C最后  
QString Range = &quot;B13:C&quot; +QString::number(intRows);  
QAxObject *allEnvData = worksheet-&gt;querySubObject(&quot;Range(QString)&quot;, Range);  
QVariant allEnvDataQVariant = allEnvData-&gt;property(&quot;Value&quot;);  
QVariantList allEnvDataList = allEnvDataQVariant.toList();  

for(int i=0; i&lt;= intRows-13; i++)  
{  
    QVariantList allEnvDataList_i =  allEnvDataList\[i\].toList() ;  
    //qDebug()&lt;&lt; allEnvDataList\_i\[0\].toString()&lt;&lt; allEnvDataList\_i\[1\].toFloat();  
    map.insert(allEnvDataList\_i\[0\].toString(),allEnvDataList\_i\[1\].toFloat());  
}  
workbooks-&gt;dynamicCall(&quot;Close()&quot;);  
return 0;  
</code></pre><p>} </p>
<p>Update 2017-05-06: 看了一下百度的<a href="https://jingyan.baidu.com/article/4d58d5410035d09dd4e9c0cb.html" target="_blank" rel="noopener">这一篇</a>已经提到了此方法。</p>

          
        
      
    </div>

    <div>
      
    </div>
  


    <div>
      
    </div>


    <footer class="post-footer">
        
     <div>    
      
  </div>  
      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://blog.jfz.me/2017/python-mat-difference-2d-plot.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sandeepin">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="异想博客">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="异想博客" src="/images/avatar.jpg">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/python-mat-difference-2d-plot.html" itemprop="url">
                  用Python实现根据角4点进行矩阵二维插值并画出伪彩色图
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-10T16:25:29+08:00">
                2017-04-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程开发/" itemprop="url" rel="index">
                    <span itemprop="name">编程开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
		  
			 
          
          
             <span id="/2017/python-mat-difference-2d-plot.html" class="leancloud_visitors" data-flag-title="用Python实现根据角4点进行矩阵二维插值并画出伪彩色图">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors </span>
               
                 <span class="leancloud-visitors-count"></span>
				 <span>℃</span>
             </span>
          
		   
          

		  
            <div class="post-wordcount">
              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  
                </span>
              
            </div>
          
		  
          
 
        


        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>　　哈哈，题目取得这么绕，其实就是自己写了一个很渣的类似图像放大的算法。已知矩阵四周的4点，扩展成更大的矩阵，中间的元素值均匀插入，例如： 　　矩阵： 1 2 3 4 　　扩展成3x3的： 1 1.5 2 2 2.5 3 3 3.5 4 　　不说废话，直接上代码：</p>
<p># -<em>- coding: utf-8 -</em>-<br>“””<br>异想家二维插值算法。<br>“””<br>import matplotlib<br>import matplotlib.pyplot as plt<br>import numpy as np<br>from numpy import *  </p>
<p># 一维插值<br>def yiweichazhi(inputmat):<br>    i = 0<br>    for _ in inputmat:<br>        inputmat[i] = inputmat[0] + (inputmat[-1] - inputmat[0]) * i / (len(inputmat) - 1)<br>        i = i + 1<br>    return inputmat  </p>
<p># 画伪彩色图<br>def 伪彩色图(zz):<br>    Row = zz.shape[0]<br>    Col = zz.shape[1]<br>    xx, yy = np.meshgrid(np.linspace(0, 10, Col), np.linspace(0, 10, Row))  # 图像xy范围和插值<br>    cmap = matplotlib.cm.jet  # 指定colormap<br>    plt.imshow(zz, origin=’lower’, extent=[xx.min(), xx.max(), yy.min(), yy.max()], cmap=cmap)  # 伪彩色图<br>    plt.show()  </p>
<p># 由角4点扩展为插值大矩阵<br>def 异想家插值(a):  </p>
<pre><code># 扩张矩阵 10x10  
pointRow = 100  # 插值点数-行  
pointCol = 100  # 插值点数-行  
aa = np.zeros(\[pointRow, pointCol\], dtype=float)  
# 四周点直接赋值  
aa\[0\]\[0\] = a\[0\]\[0\]  
aa\[0\]\[-1\] = a\[0\]\[1\]  
aa\[-1\]\[0\] = a\[1\]\[0\]  
aa\[-1\]\[-1\] = a\[1\]\[1\]  
# 四周先插值  
aa\[0\] = yiweichazhi(aa\[0\])  
aa\[-1\] = yiweichazhi(aa\[-1\])  
aa\[:, 0\] = yiweichazhi(aa\[:, 0\])  
aa\[:, -1\] = yiweichazhi(aa\[:, -1\])  
# 全部插值  
for i in range(len(aa)):  
    aa\[i\] = yiweichazhi(aa\[i\])  
    i = i + 1  
return aa  
</code></pre><p># 未插值前4点矩阵<br>a = np.array([<br>    [1, 2],<br>    [3, 4]<br>], dtype=float)  </p>
<p>aa = 异想家插值(a)  </p>
<p># 打印aa<br>print(aa, “\n”)<br># 画图<br>伪彩色图(aa)</p>

          
        
      
    </div>

    <div>
      
    </div>
  


    <div>
      
    </div>


    <footer class="post-footer">
        
     <div>    
      
  </div>  
      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://blog.jfz.me/2017/centos7-mysql-tomcat-gitblit.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sandeepin">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="异想博客">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="异想博客" src="/images/avatar.jpg">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/centos7-mysql-tomcat-gitblit.html" itemprop="url">
                  CentOS7安装MySQL、Tomcat和GitBlit记录
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-26T16:22:44+08:00">
                2017-03-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/教程技巧/" itemprop="url" rel="index">
                    <span itemprop="name">教程技巧</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
		  
			 
          
          
             <span id="/2017/centos7-mysql-tomcat-gitblit.html" class="leancloud_visitors" data-flag-title="CentOS7安装MySQL、Tomcat和GitBlit记录">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors </span>
               
                 <span class="leancloud-visitors-count"></span>
				 <span>℃</span>
             </span>
          
		   
          

		  
            <div class="post-wordcount">
              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  
                </span>
              
            </div>
          
		  
          
 
        


        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="一、安装MySQL"><a href="#一、安装MySQL" class="headerlink" title="一、安装MySQL"></a>一、安装MySQL</h2><p>1、安装这个发布包 yum localinstall mysql-community-release-el6-5.noarch.rpm 可以通过下面的命令来确认这个仓库被成功添加： yum repolist enabled | grep “mysql.<em>-community.</em> 2、安装MySQL服务器 yum -y install mysql-server 3、设置开机启动 chkconfig mysqld on 4、启动MySql服务 service mysqld start 5、设置MySQL的root用户设置密码 mysql -u root 进入后用下面的命令设置root的密码为root： mysql&gt; set password for root@localhost=password（’root’）； mysql&gt; exit 6、用新密码登陆 mysql -u root -p 7、确认版本信息： mysql -V 8、基本命令 show databases; // 查看系统已存在的数据库 use databasesname; // 选择需要使用的数据库 drop database databasename; // 删除选定的数据库 exit // 退出数据库的连接 create database test01; // 建立名为test的数据库 show tables; // 列出当前数据库下的表 其他基本的增删改查使用标准SQL即可。 9、开放远程登录权限 全部（在MySQL界面输入）： GRANT ALL PRIVILEGES ON _._ TO ‘root‘@’%’ IDENTIFIED BY ‘root’ WITH GRANT OPTION; FLUSH PRIVILEGES; 指定IP的写法： GRANT ALL ON _._ to root@’192.168.1.103’ IDENTIFIED BY ‘root’; FLUSH PRIVILEGES;</p>
<h2 id="二、安装Tomcat"><a href="#二、安装Tomcat" class="headerlink" title="二、安装Tomcat"></a>二、安装Tomcat</h2><p>1、下载地址，下载文件： <a href="http://tomcat.apache.org/" target="_blank" rel="noopener">http://tomcat.apache.org/</a> apache-tomcat-7.0.76.tar.gz 2、在usr/tomcat中解压 tar -zxvf apache-tomcat-7.0.76.tar.gz 3、进bin目录，运行tomcat： sh startup.sh Tomcat部署成功，访问页面正常： 127.0.0.1:8080 4、停止Tomcat： sh shutdown.sh 5、修改tomcat 8080端口为80： nano conf/server.xml 找到对应改端口的地方改为80。 6、放Web项目 直接将web项目文件件拷贝到webapps目录中，完毕！ 7、再启动Tomcat sh startup.sh</p>
<h2 id="三、安装GitBlit"><a href="#三、安装GitBlit" class="headerlink" title="三、安装GitBlit"></a>三、安装GitBlit</h2><p>1、下载GitBlit GitBlit的默认输出目录是这里，所以就创建这个目录： mkdir -p /opt/gitblit cd /opt/gitblit wget <a href="http://dl.bintray.com/gitblit/releases/gitblit-1.8.0.tar.gz" target="_blank" rel="noopener">http://dl.bintray.com/gitblit/releases/gitblit-1.8.0.tar.gz</a> 如果下载过程中出现提示：-bash: wget: command not foundls 说明没有安装wget程序，用yum库装一个即可： yum install wget 2、解压缩Gitblit 使用命令tar将下载到的gitblit压缩包解压缩到目标目录，我是解压缩到/opt/gitblit目录下： tar -zxvf gitblit-1.8.0.tar.gz 3、修改需要的配置文件 nano data/defaults.properties 根据自己的需要修改配置信息，我只修改了以下几个地方： git.repositoriesFolder = /opt/gitblit/data/git server.httpPort = 10101 server.httpBindInterface = 192.168.1.200 server.httpsBindInterface = 修改完以后保存，退出。 4、修改service-centos.sh nano service-centos.sh 根据自己的服务器的设置： GITBLIT_PATH = /opt/gitblit GITBLIT_BASE_FOLDER = /opt/gitblit/data GITBLIT_HTTP_PORT = 10101 修改完以后保存，退出。 5、启动gitblit 5.1、直接启动gitblit服务 通过java执行gitblit服务，要注意执行的命令参数，可以参考以下命令 java -jar gitblit.jar –baseFolder data # 当前在/opt/gitblit目录下 如果命令执行无误，则可以打开浏览器输入设置的站点信息即可打开GitBlit的管理界面。 5.2、通过service启动gitblit服务 新版本Gitblit已经帮我们封装了服务安装脚本，我们只需要执行安装脚本： sh install-service-centos.sh 和服务启动脚本： sh service-centos.sh 即可。如果在执行shell脚本时出现权限问题，只需要给文件增加读写权限即可。如果配置正确的话，则可以打开浏览器输入设置的站点信息即可打开GitBlit的管理界面。</p>
<h2 id="四、出现问题结束进程"><a href="#四、出现问题结束进程" class="headerlink" title="四、出现问题结束进程"></a>四、出现问题结束进程</h2><p>查询端口占用： netstat -apn | grep 10101 杀进程： kill -9 26105</p>

          
        
      
    </div>

    <div>
      
    </div>
  


    <div>
      
    </div>


    <footer class="post-footer">
        
     <div>    
      
  </div>  
      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://blog.jfz.me/2017/hbase-maven-spring.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sandeepin">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="异想博客">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="异想博客" src="/images/avatar.jpg">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/hbase-maven-spring.html" itemprop="url">
                  Hbase与Maven工程的Spring配置笔记
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-25T16:17:04+08:00">
                2017-03-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/教程技巧/" itemprop="url" rel="index">
                    <span itemprop="name">教程技巧</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
		  
			 
          
          
             <span id="/2017/hbase-maven-spring.html" class="leancloud_visitors" data-flag-title="Hbase与Maven工程的Spring配置笔记">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors </span>
               
                 <span class="leancloud-visitors-count"></span>
				 <span>℃</span>
             </span>
          
		   
          

		  
            <div class="post-wordcount">
              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  
                </span>
              
            </div>
          
		  
          
 
        


        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1、HBase基本操作"><a href="#1、HBase基本操作" class="headerlink" title="1、HBase基本操作"></a>1、HBase基本操作</h2><p>hbase shell：                                   连接到正在运行的HBase实例<br>help：                                          显示一些基本的使用信息以及命令示例。 需要注意的是: 表名, 行, 列都必须使用引号括起来<br>create ‘test’, ‘cf’：                           创建一个新表, 必须要指定表明和列族名<br>list ‘test’：                                   列出 test 表的信息<br>put ‘test’, ‘row1’, ‘cf:a’, ‘value1’            往表中插入数据，<br>put ‘test’, ‘row2’, ‘cf:b’, ‘value2’            我们插入了三行数据, 第一行的row key 是 row1, 列是 cf:a, 其值是 value1.HBase 中的列是由列族前缀, 冒号以及列名后缀组成<br>put ‘test’, ‘row3’, ‘cf:c’, ‘value3’<br>scan ‘test’                                     一次扫描 HBase 表中的所有数据<br>get ‘test’, ‘row1’                              一次获取一行数据<br>disable ‘test’                                  在某些情况下如果你想要删除表或是改变其设置, 需要先禁用表<br>enable ‘test’                                   启用表<br>drop ‘test’                                     删除表  </p>
<p>quit：                                          退出HBase Shell, 但是 HBase 实例仍然在后台运行<br>stop-hbase.sh                                   bin/start-hbase.sh 脚本可以很方便的启动所有 HBase 守护进程, 同样的, bin/stop-hbase.sh 脚本可以很方便的停止所有 HBase 守护进程<br>jps                                             来确保 HMaster 和 HRegionServer 进程都已经关闭  </p>
<h2 id="2、示例工程配置"><a href="#2、示例工程配置" class="headerlink" title="2、示例工程配置"></a>2、示例工程配置</h2><p>【pom.xml】自己结合工程：</p>
<p>&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;  </p>
<p>&lt;hbase.version&gt;2.5.1&lt;/hbase.version&gt;  </p>
<p>&lt;spring-data-hadoop.version&gt;2.4.0.RELEASE&lt;/spring-data-hadoop.version&gt;  </p>
<p>t;!– Hadoop–&gt;  </p>
<dependency><br>  <groupid>org.springframework.data</groupid><br>  <artifactid>spring-data-hadoop</artifactid><br>  <version>2.4.0.RELEASE</version><br></dependency><br>lt;dependency&gt;<br>  <groupid>org.apache.hbase</groupid><br>  <artifactid>hbase-client</artifactid><br>  <version>1.2.1</version><br> 

<p>网上例子：</p>
<properties><br>    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;<br>    &lt;hbase.version&gt;1.2.2&lt;/hbase.version&gt;<br>    &lt;spring-data-hadoop.version&gt;2.4.0.RELEASE&lt;/spring-data-hadoop.version&gt;<br></properties>  

<dependencies><br>    <dependency><br>        <groupid>org.apache.hbase</groupid><br>        <artifactid>hbase-client</artifactid><br>        <version>${hbase.version}</version><br>    </dependency><br><br>    <dependency><br>        <groupid>org.springframework.data</groupid><br>        <artifactid>spring-data-hadoop</artifactid><br>        <version>${spring-data-hadoop.version}</version><br>    </dependency><br></dependencies>  

<p>【Spring配置文件-直接指定】 　　web.xml中到applicationContext.xml：</p>
<p><context-param><br>  <param-name>contextConfigLocation</param-name><br>  <param-value>classpath:applicationContext.xml</param-value><br></context-param>  </p>
<p>创建一个 Spring 配置文件 spring-hbase.xml，在该文件中配置与 HBase 连接相关的信息。直接指定 HDFS 地址以及 ZooKeeper 的地址和端口号。 自己结合工程 写到了applicationContext.xml中，不建立spring-hbase.xml：</p>
<p>xmlns:hdp=”<a href="http://www.springframework.org/schema/hadoop&quot;" target="_blank" rel="noopener">http://www.springframework.org/schema/hadoop&quot;</a><br>xsi:schemaLocation中加：<br><a href="http://www.springframework.org/schema/hadoop" target="_blank" rel="noopener">http://www.springframework.org/schema/hadoop</a><br><a href="http://www.springframework.org/schema/hadoop/spring-hadoop.xsd" target="_blank" rel="noopener">http://www.springframework.org/schema/hadoop/spring-hadoop.xsd</a>  </p>
<pre><code>&lt;!\-\- 配置hbase连接 --&gt;  
&lt;!\-\- HDFS配置 --&gt;  
&lt;hdp:configuration id=&quot;hadoopConfiguration&quot;&gt;fs.default.name=hdfs://192.168.1.100:9001&lt;/hdp:configuration&gt;  
&lt;!\-\- HBase连接配置 --&gt;  
&lt;hdp:hbase-configuration id=&quot;hbaseConfiguration&quot; zk-quorum=&quot;192.168.1.101,192.168.1.101,192.168.1.102&quot; zk-port=&quot;2181&quot;/&gt;  
&lt;!\-\- HbaseTemplate Bean配置--&gt;  
&lt;bean id=&quot;hbaseTemplate&quot; class=&quot;org.springframework.data.hadoop.hbase.HbaseTemplate&quot;&gt;  
    &lt;property name=&quot;configuration&quot; ref=&quot;hbaseConfiguration&quot;&gt;&lt;/property&gt;  
&lt;/bean&gt; 
</code></pre><p>网上例子：</p>
<p>&lt;?xml version=”1.0” encoding=”UTF-8”?&gt;  </p>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:hdp="http://www.springframework.org/schema/hadoop" xmlns:p="http://www.springframework.org/schema/p" xsi:schemalocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.2.xsd http://www.springframework.org/schema/hadoop http://www.springframework.org/schema/hadoop/spring-hadoop-2.3.xsd"><br><br>    &lt;!-- HDFS配置 –&gt;<br>    &lt;hdp:configuration id=”hadoopConfiguration”&gt;<br>        fs.defaultFS=”hdfs://localhost:9000”<br>    &lt;/hdp:configuration&gt;<br><br>    &lt;!-- HBase连接配置 –&gt;<br>    &lt;hdp:hbase-configuration id=”hbaseConfiguration” zk-quorum=”127.0.0.1” zk-port=”2181”/&gt;<br><br>    &lt;!-- HbaseTemplate Bean配置–&gt;<br>    <bean id="hbaseTemplate" class="org.springframework.data.hadoop.hbase.HbaseTemplate" p:configuration-ref="hbaseConfiguration"><br></bean></beans>  

<h2 id="3、测试代码"><a href="#3、测试代码" class="headerlink" title="3、测试代码"></a>3、测试代码</h2><p>自己结合工程-测试：</p>
<p>package com.whut.monitor.hbase.test;<br>import 略;  </p>
<p>//@RunWith(SpringJUnit4ClassRunner.class)<br>//@ContextConfiguration(locations = “classpath:applicationContext.xml”)<br>public class HBaseTest {  </p>
<pre><code>private static final String TABLE_NAME    = &quot;test&quot;;  
private static final String ROW_KEY       = &quot;row1&quot;;  
private static final String COLUMN_FAMILY = &quot;cf&quot;;  
private static final String QUALIFIER     = &quot;a&quot;;  
@Test  
public void test() {  
    // 加载Spring配置文件  
    ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);  
    // 获取HbaseTemplate  
    HbaseTemplate hbaseTemplate = (HbaseTemplate) applicationContext.getBean(&quot;hbaseTemplate&quot;);  
    // 通过表名和rowKey获取最近一行数据  
    String result = hbaseTemplate.get(TABLE\_NAME, ROW\_KEY, new RowMapper&lt;String&gt;() {  
        public String mapRow(Result result, int rowNum) throws Exception {  
            return Bytes.toString(result.getValue(COLUMN_FAMILY.getBytes(), QUALIFIER.getBytes()));  
        }  
    });  
    System.out.println(result); // 输出结果是：value1  
}  
</code></pre><p>}  </p>
<p>自己结合工程-IHBaseDao.java中写法：</p>
<p>public interface IHBaseDao {<br>    String find(String tableName, String key, final String family, final String qualifier);<br>}  </p>
<p>HBaseDaoImpl.java:<br>package com.whut.monitor.dao.impl;<br>import 略;  </p>
<p>@Component<br>public class HBaseDaoImpl implements IHBaseDao {<br>    @Resource(name=”hbaseTemplate”)<br>    private HbaseTemplate hbaseTemplate;  </p>
<pre><code>@Override  
public String find(String tableName, String key, final String family, final String qualifier) {  
    String result = hbaseTemplate.get(tableName, key, new RowMapper&lt;String&gt;() {  
        public String mapRow(Result result, int rowNum) throws Exception {  
            return Bytes.toString(result.getValue(family.getBytes(), qualifier.getBytes()));  
        }  
    });  
    return result;  
}  
</code></pre><p>}  </p>
<p>添加数据：</p>
<p>public Boolean execute(String tableName, final String key,final String family,final String qualifier,final String value) {<br>       return hbaseTemplate.execute(tableName, new TableCallback<boolean>() {<br>           public Boolean doInTable(HTableInterface table) throws Throwable {<br>               boolean flag = false;<br>               try{<br>                   byte[] rowkey = key.getBytes();<br>                   Put put = new Put(rowkey);<br>                   put.add(Bytes.toBytes(family),Bytes.toBytes(qualifier), Bytes.toBytes(value));<br>                   table.put(put);<br>                flag = true;<br>               }catch(Exception e){<br>                   e.printStackTrace();<br>               }<br>               return flag;<br>           }<br>       });<br>    System.out.println(“test poi jfz sandeepin”);;<br>    return true;<br>   }    </boolean></p>
<p>可以测试了，以上是最简单的调通流程，真正使用得还好翻官方文档，不断深入！</p>

          
        
      
    </div>

    <div>
      
    </div>
  


    <div>
      
    </div>


    <footer class="post-footer">
        
     <div>    
      
  </div>  
      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://blog.jfz.me/2017/centos7-hadoop272-hbase121-step.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sandeepin">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="异想博客">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="异想博客" src="/images/avatar.jpg">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/centos7-hadoop272-hbase121-step.html" itemprop="url">
                  CentOS7.0+Hadoop2.7.2+Hbase1.2.1搭建教程
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-23T16:15:11+08:00">
                2017-03-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/教程技巧/" itemprop="url" rel="index">
                    <span itemprop="name">教程技巧</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
		  
			 
          
          
             <span id="/2017/centos7-hadoop272-hbase121-step.html" class="leancloud_visitors" data-flag-title="CentOS7.0+Hadoop2.7.2+Hbase1.2.1搭建教程">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors </span>
               
                 <span class="leancloud-visitors-count"></span>
				 <span>℃</span>
             </span>
          
		   
          

		  
            <div class="post-wordcount">
              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  
                </span>
              
            </div>
          
		  
          
 
        


        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1、软件版本"><a href="#1、软件版本" class="headerlink" title="1、软件版本"></a>1、软件版本</h2><p>CentOS-7.0-1406-x86_64-DVD.iso jdk-7u80-linux-x64.tar.gz hadoop-2.7.2.tar.gz hbase-1.2.1-bin.tar.gz</p>
<h2 id="2、集群配置"><a href="#2、集群配置" class="headerlink" title="2、集群配置"></a>2、集群配置</h2><p>主机：Master.Hadoop IP地址：192.168.1.100 主机：Slave1.Hadoop IP地址：192.168.1.101 主机：Slave2.Hadoop IP地址：192.168.1.102 用户设置：系统用了GUI，新版非得建立一个账户。例如随便建一个jfz，密码1，但操作时使用root（密码root）直接进行，装好后重启，以后用SSH进root。</p>
<h2 id="3、配置本地hosts"><a href="#3、配置本地hosts" class="headerlink" title="3、配置本地hosts"></a>3、配置本地hosts</h2><p>输入指令： nano /etc/hosts 将以下数据复制进入各个主机中： 192.168.1.100 Master.Hadoop 192.168.1.101 Slave1.Hadoop 192.168.1.102 Slave2.Hadoop 使用以下指令在Master主机中进行测试，可使用类似指令在Slave主机测试： ping Master.Hadoop ping Slave1.Hadoop ping Slave2.Hadoop</p>
<h2 id="4、关闭防火墙"><a href="#4、关闭防火墙" class="headerlink" title="4、关闭防火墙"></a>4、关闭防火墙</h2><p>三台机器均关闭防火墙。 停止firewall： systemctl stop firewalld.service 禁止firewall开机启动： systemctl disable firewalld.service</p>
<h2 id="5、Java安装"><a href="#5、Java安装" class="headerlink" title="5、Java安装"></a>5、Java安装</h2><p>（1）卸载自带的OpenJDK v1.7： java -version yum remove java-1.7.0-openjdk 重启。 （2） JDK安装： 在/usr下创建java文件夹，将jdk-7u80-linux-x64.tar.gz文件放到这个文件夹中。 使用以下指令进行解压 tar zxvf jdk-7u80-linux-x64.tar.gz 解压后可以删除掉gz文件 rm jdk-7u80-linux-x64.tar.gz 配置JDK环境变量： nano /etc/profile 添加Java环境变量，将以下数据复制到文件底部： export JAVA_HOME=/usr/java/jdk1.7.0_80 export JRE_HOME=/usr/java/jdk1.7.0_80/jre export CLASSPATH=.:$CLASSPATH:$JAVA_HOME/lib:$JRE_HOME/lib export PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin 重载使配置生效： source /etc/profile 验证安装成功： java -version 如果出现对应版本信息，则配置成功：java version “1.7.0_80”</p>
<h2 id="6、SSH免密码登录"><a href="#6、SSH免密码登录" class="headerlink" title="6、SSH免密码登录"></a>6、SSH免密码登录</h2><p>因为Hadoop需要通过SSH登录到各个节点进行操作，本集群用的是root用户，每台服务器都生成公钥，再合并到authorized_keys。 （1）修改sshd_config配置 CentOS默认没有启动SSH无密登录，去掉/etc/ssh/sshd_config其中2行的注释，每台服务器都要设置。 nano /etc/ssh/sshd_config RSAAuthentication yes PubkeyAuthentication yes （2）生成key 输入命令： ssh-keygen -t rsa 生成key，都不输入密码，一直回车，/root就会生成。ssh文件夹，每台服务器都要设置。 （3）合并key 合并公钥到authorized_keys文件，在Master服务器，进入/root/.ssh目录，通过SSH命令合并。 cat id_rsa.pub》 authorized_keys ssh <a href="mailto:root@192.168.1.101" target="_blank" rel="noopener">root@192.168.1.101</a> cat ~/.ssh/id_rsa.pub》 authorized_keys ssh <a href="mailto:root@192.168.1.102" target="_blank" rel="noopener">root@192.168.1.102</a> cat ~/.ssh/id_rsa.pub》 authorized_keys （4）拷贝key 把Master服务器的authorized_keys、known_hosts复制到Slave服务器的/root/.ssh目录。 scp authorized_keys known_hosts <a href="mailto:root@192.168.1.101" target="_blank" rel="noopener">root@192.168.1.101</a>:/root/.ssh scp authorized_keys known_hosts <a href="mailto:root@192.168.1.102" target="_blank" rel="noopener">root@192.168.1.102</a>:/root/.ssh （5）检证免密登陆 ssh <a href="mailto:root@192.168.1.101" target="_blank" rel="noopener">root@192.168.1.101</a> ssh <a href="mailto:root@192.168.1.102" target="_blank" rel="noopener">root@192.168.1.102</a> 以后就不需要输入密码了。</p>
<h2 id="7、Hadoop安装流程"><a href="#7、Hadoop安装流程" class="headerlink" title="7、Hadoop安装流程"></a>7、Hadoop安装流程</h2><p>（1）下载hadoop安装包 将下载“hadoop-2.7.2.tar.gz”文件上传至到/home/hadoop目录下。 注意：一定要在Linux下解压，否则执行权限问题很麻烦。 （2）解压压缩包 tar -xzvf hadoop-2.7.2.tar.gz （3）在/home/hadoop目录下创建目录 创建数据存放的文件夹，tmp、hdfs、hdfs/data、hdfs/name mkdir -p tmp hdfs/name hdfs/data （4）配置core-site.xml 指令： nano /home/hadoop/hadoop-2.7.2/etc/hadoop/core-site.xml 内容： fs.defaultFS hdfs://192.168.1.100:9000 hadoop.tmp.dir file:/home/hadoop/tmp io.file.buffer.size 131702 （5）配置hdfs-site.xml 指令： nano /home/hadoop/hadoop-2.7.2/etc/hadoop/hdfs-site.xml 内容： dfs.namenode.name.dir file:/home/hadoop/hdfs/name dfs.datanode.data.dir file:/home/hadoop/hdfs/data dfs.replication 2 dfs.namenode.secondary.http-address 192.168.1.100:9001 dfs.webhdfs.enabled true （6）配置mapred-site.xml 指令： nano /home/hadoop/hadoop-2.7.2/etc/hadoop/mapred-site.xml 内容： mapreduce.framework.name yarn mapreduce.jobhistory.address 192.168.1.100:10020 mapreduce.jobhistory.webapp.address 192.168.1.100:19888 （7）配置yarn-site.xml 指令： nano /home/hadoop/hadoop-2.7.2/etc/hadoop/yarn-site.xml 内容： yarn.nodemanager.aux-services mapreduce_shuffle yarn.nodemanager.auxservices.mapreduce.shuffle.class org.apache.hadoop.mapred.ShuffleHandler yarn.resourcemanager.address 192.168.1.100:8032 yarn.resourcemanager.scheduler.address 192.168.1.100:8030 yarn.resourcemanager.resource-tracker.address 192.168.1.100:8031 yarn.resourcemanager.admin.address 192.168.1.100:8033 yarn.resourcemanager.webapp.address 192.168.1.100:8088 yarn.nodemanager.resource.memory-mb 2048 注意：yarn.nodemanager.resource.memory-mb值要大于1024，否则影响进程！ （8）配置hadoop-env.sh、yarn-env.sh的JAVA_HOME 配置/home/hadoop/hadoop-2.7.2/etc/hadoop目录下： hadoop-env.sh、yarn-env.sh的JAVA_HOME，不设置的话，启动不了。 export JAVA_HOME=/usr/java/jdk1.7.0_80 （9）配置slaves nano /home/hadoop/hadoop-2.7.2/etc/hadoop/slaves 删除默认的localhost，增加2个从节点： 192.168.1.101 192.168.1.102 （10）传送Hadoop至其它节点 将配置好的Hadoop复制到各个节点对应位置上，通过scp传送： scp -r /home/hadoop 192.168.1.101:/home/ scp -r /home/hadoop 192.168.1.102:/home/ （11）启动Hadoop 在Master服务器启动hadoop，从节点会自动启动。 进入/home/hadoop/hadoop-2.7.2目录，初始化，输入命令： bin/hdfs namenode -format 全部启动： sbin/start-all.sh 也可以分开启动sbin/start-dfs.sh、sbin/start-yarn.sh。 Hadoop环境变量配置，需要在/etc/profile 中添加HADOOP_HOME内容，之前已经配置过，所以这一步已经节省下来，那么可重启 source /etc/profile。 （12）验证Hadoop jps运行成功结果：</p>
<h2 id="8、Hbase安装流程"><a href="#8、Hbase安装流程" class="headerlink" title="8、Hbase安装流程"></a>8、Hbase安装流程</h2><p>（1）复制安装包至Master节点/home/hbase目录下 通过SFTP或是直接拷贝至Master节点，软件推荐在Linux下解压！ （2）解压压缩包 tar zxvf hbase-1.2.1-bin.tar.gz （3）添加到环境变量 将hbase添加到环境变量/etc/profile中，配环境变量方便使用指令： nano /etc/profile 内容： export HBASE_HOME=/home/hbase/hbase-1.2.1 export PATH=$HBASE_HOME/bin:$PATH export HBASE_MANAGES_ZK=true export HBASE_CLASSPATH=/home/hbase/hbase-1.2.1/conf （4）修改配置文件hbase-env.sh nano /home/hbase/hbase-1.2.1/conf/hbase-env.sh 内容： export JAVA_HOME=/usr/java/jdk1.7.0_80 （5）修改配置文件hbase-site.xml hbase.rootdir hdfs://192.168.1.100:9000/hbase hbase.cluster.distributed true hbase.zookeeper.quorum Master.Hadoop,Slave1.Hadoop,Slave2.Hadoop hbase.temp.dir /home/hbase/hbase-1.2.1/tmp hbase.zookeeper.property.dataDir /home/hbase/hbase-1.2.1/tmp/zookeeper hbase.master.info.port 60010 （6）修改配置文件regionservers： nano regionservers 将文件内容设置为： Master.Hadoop Slave1.Hadoop Slave2.Hadoop （7）Hbase复制到从节点 差不多要成功了，别忘了最后一步！ scp -r /home/hbase/hbase-1.2.1 <a href="mailto:root@192.168.1.101" target="_blank" rel="noopener">root@192.168.1.101</a>:/home/hbase/ scp -r /home/hbase/hbase-1.2.1 <a href="mailto:root@192.168.1.102" target="_blank" rel="noopener">root@192.168.1.102</a>:/home/hbase/ （8）验证Hbase 1、用jps命令看进程对不对。 2、测试Web访问 <a href="http://Master.Hadoop:8088/" target="_blank" rel="noopener">http://Master.Hadoop:8088/</a> <a href="http://Master.Hadoop:50070/" target="_blank" rel="noopener">http://Master.Hadoop:50070/</a> <a href="http://Master.Hadoop:60010/" target="_blank" rel="noopener">http://Master.Hadoop:60010/</a></p>

          
        
      
    </div>

    <div>
      
    </div>
  


    <div>
      
    </div>


    <footer class="post-footer">
        
     <div>    
      
  </div>  
      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>


          
          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Sandeepin" />
          <p class="site-author-name" itemprop="name">Sandeepin</p>
          <p class="site-description motion-element" itemprop="description">异想博客</p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">79</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/EZLippi" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/ouyanglip" target="_blank" title="weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.zhihu.com/people/lippi-ouyang" target="_blank" title="zhihu">
                  
                    <i class="fa fa-fw fa-battery-3"></i>
                  
                  zhihu
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.woaitqs.cc/" title="Qisen Tang" target="_blank">Qisen Tang</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://szhshp.org" title="szhshp的博客" target="_blank">szhshp的博客</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://python.zhangwei.website" title="JuniorCoder" target="_blank">JuniorCoder</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://hippo-jessy.com" title="Hippo" target="_blank">Hippo</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.zhihu.com/people/lippi-ouyang" title="友链出租" target="_blank">友链出租</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2008 - 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sandeepin</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io" rel="external nofollow">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next" rel="external nofollow">
    NexT.Mist
  </a>| Hosted by <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a>
</div>





        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
  

  
    <span class="site-pv"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/jquery.lazyload/1.9.3/jquery.lazyload.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.ui.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  

  



  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  


  
  

  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("kJ2sJuSJeByLioULSXrJ5CSq-9Nh9j0Va", "uBWeNxCbFEWsOVDTmAInrDq3");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  

	<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/love.js"></script>

</body>
</html>
